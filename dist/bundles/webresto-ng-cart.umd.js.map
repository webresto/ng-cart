{"version":3,"file":"webresto-ng-cart.umd.js","sources":["../esm2015/projects/webresto/ng-cart/src/lib/services/ng-restocart.service.ts","../esm2015/projects/webresto/ng-cart/src/lib/directives/add-dish-to-cart.directive.ts","../esm2015/projects/webresto/ng-cart/src/lib/directives/amount-cart.directive.ts","../esm2015/projects/webresto/ng-cart/src/lib/directives/checkout.directive.ts","../esm2015/projects/webresto/ng-cart/src/lib/directives/delete-from-cart.directive.ts","../esm2015/projects/webresto/ng-cart/src/lib/directives/dish-calc.directive.ts","../esm2015/projects/webresto/ng-cart/src/lib/directives/modifires.directive.ts","../esm2015/projects/webresto/ng-cart/src/lib/directives/order-cart-user.directive.ts","../esm2015/projects/webresto/ng-cart/src/lib/directives/set-amount.directive.ts","../esm2015/projects/webresto/ng-cart/src/lib/directives/set-dish-comment.directive.ts","../../node_modules/tslib/tslib.es6.js","../esm2015/lib/projects/webresto/ng-cart/src/lib/components/dish-calc/dish-calc.component.html","../esm2015/lib/projects/webresto/ng-cart/src/lib/components/dish-calc/dish-calc.component.ts","../projects/webresto/ng-cart/src/lib/ng-cart.module.ts","../../projects/webresto/ng-cart/src/public_api.ts","../../projects/webresto/ng-cart/src/webresto-ng-cart.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Observable, BehaviorSubject, throwError, from } from 'rxjs';\r\nimport { catchError, filter, map, switchMap, tap } from 'rxjs/operators';\r\nimport {\r\n  NetService,\r\n  EventerService,\r\n  EventMessage\r\n} from '@webresto/ng-core/dist';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NgRestoCartService {\r\n  cartID: string = this.getCartId();\r\n  cart: BehaviorSubject<Cart> = new BehaviorSubject(null);\r\n  modifires: BehaviorSubject<any> = new BehaviorSubject([]);\r\n  OrderFormChange = new BehaviorSubject(null);\r\n\r\n  modifiresMessage: BehaviorSubject<EventMessage[]> = new BehaviorSubject([]);\r\n\r\n  constructor(private net: NetService, private eventer: EventerService) { }\r\n\r\n  restrictions$ = this.net.get<RestrictionsOrder>(`/restrictions`)\r\n\r\n  getCartId(): string {\r\n    return localStorage.getItem('cartID');\r\n  }\r\n\r\n  getCart() {\r\n    return this.net.get<{ cart: Cart }>(`/cart${this.cartID ? '?cartId=' + this.cartID : ''}`).pipe(\r\n      switchMap(data => {\r\n        if (!data) {\r\n          this.removeCartId();\r\n        };\r\n        return data ? from([data]) : this.net.get<{ cart: Cart }>(`/cart}`)\r\n      }),\r\n      switchMap(\r\n        data => {\r\n          if (data.cart.state == 'ORDER') {\r\n            return throwError(new Error('Cart in order state'));\r\n          } else {\r\n            if (!this.cartID) {\r\n              this.setCartId(data.cart.cartId);\r\n            };\r\n            this.cart.next(data.cart);\r\n          };\r\n          return this.cart;\r\n        }),\r\n      catchError(err => {\r\n        this.removeCartId();\r\n        return throwError(err);\r\n      })\r\n    );\r\n  }\r\n\r\n  addDishToCart(data) {\r\n    if (this.modifiresMessage.value.length) {\r\n      this.modifiresMessage.value.forEach(message => {\r\n        this.eventer.emitMessageEvent(message);\r\n      });\r\n      return;\r\n    }\r\n\r\n    this.net.put('/cart/add', data).subscribe(\r\n      res => {\r\n        this.setCartId(res.cart.cartId);\r\n        this.cart.next(res.cart);\r\n        this.cartID = res.cart.cartId;\r\n\r\n        /*this.eventer.emitMessageEvent(\r\n         new EventMessage('success', 'Успех', 'Блюдо добавлено в корзину')\r\n         );*/\r\n\r\n      }, () => {\r\n        /*this.eventer.emitMessageEvent(\r\n         new EventMessage('error', 'Ошибка', 'Не удалось добавить блюдо')\r\n         )*/\r\n      });\r\n  }\r\n\r\n  addDishToCart$(data) {\r\n    if (this.modifiresMessage.value.length) {\r\n      this.modifiresMessage.value.forEach(message => {\r\n        this.eventer.emitMessageEvent(message);\r\n      });\r\n      return from([null]);\r\n    }\r\n\r\n    return this.net.put('/cart/add', data)\r\n      .pipe(\r\n        tap(res => {\r\n          this.setCartId(res.cart.cartId);\r\n          this.cart.next(res.cart);\r\n          this.cartID = res.cart.cartId;\r\n        })\r\n      );\r\n  }\r\n\r\n  setDishCountToCart(dishId, amount) {\r\n    this.net.post('/cart/set', {\r\n      dishId: dishId,\r\n      cartId: this.cartID,\r\n      amount: amount\r\n    }).subscribe(\r\n      res => {\r\n        this.setCartId(res.cart.cartId);\r\n        this.cart.next(res.cart);\r\n        this.cartID = res.cart.cartId;\r\n        /*this.eventer.emitMessageEvent(\r\n         new EventMessage('success', 'Успех', 'Изменено количество')\r\n         );*/\r\n      }, () => {\r\n        /*this.eventer.emitMessageEvent(\r\n         new EventMessage('error', 'Ошибка', 'Не удалось изменить количество')\r\n         )*/\r\n      });\r\n  }\r\n\r\n  setDishComment(dishId, comment) {\r\n    return this.net.post('/cart/setcomment', {\r\n      dishId: dishId,\r\n      cartId: this.cartID,\r\n      comment: comment\r\n    }).pipe(tap(\r\n      res => {\r\n        this.setCartId(res.cart.cartId);\r\n        this.cart.next(res.cart);\r\n        this.cartID = res.cart.cartId;\r\n\r\n      }, () => {}\r\n    ))\r\n\r\n  }\r\n\r\n  removeDishFromCart$(dishId, amount) {\r\n    return this.net.put('/cart/remove', {\r\n      dishId: dishId,\r\n      cartId: this.cartID,\r\n      amount: amount\r\n    })\r\n      .pipe(tap(result => {\r\n        this.setCartId(result.cart.cartId);\r\n        this.cart.next(result.cart);\r\n        this.cartID = result.cart.cartId;\r\n      }));\r\n\r\n  }\r\n\r\n  removeDishFromCart(dishId, amount) {\r\n    this.net.put('/cart/remove', {\r\n      dishId: dishId,\r\n      cartId: this.cartID,\r\n      amount: amount\r\n    }).subscribe(\r\n      result => {\r\n        this.setCartId(result.cart.cartId);\r\n        this.cart.next(result.cart);\r\n        this.cartID = result.cart.cartId;\r\n        /*this.eventer.emitMessageEvent(\r\n         new EventMessage('success', 'Успех', 'Блюдо успешно удалено')\r\n         );*/\r\n\r\n      }, () => {\r\n        /*this.eventer.emitMessageEvent(\r\n         new EventMessage('error', 'Ошибка', 'Не удалось удалить блюдо')\r\n         )*/\r\n      });\r\n\r\n  }\r\n\r\n  checkoutCart(data) {\r\n    let order = {\r\n      cartId: this.cartID,\r\n      address: {\r\n        streetId: data.street.id,\r\n        home: data.house,\r\n        housing: data.housing,\r\n        // index: \"1278\",\r\n        entrance: data.entrance,\r\n        floor: data.floor,\r\n        apartment: data.apartment\r\n      },\r\n\r\n      customer: {\r\n        phone: data.phone,\r\n        name: data.name,\r\n        mail: data.email || undefined\r\n      }\r\n    };\r\n    return this.orderCart(order);\r\n\r\n  }\r\n\r\n  orderCart(data) {\r\n    return this.net.post('/order', data)\r\n      .pipe(\r\n        tap(\r\n          result => {\r\n            this.setCartId(result.cart.cartId);\r\n            this.cart.next(result.cart);\r\n            this.cartID = result.cart.cartId;\r\n\r\n            /*this.eventer.emitMessageEvent(\r\n             new EventMessage('success', 'Успех', 'Заказ упешно оформлен')\r\n             );*/\r\n          },\r\n          error => {\r\n            console.log(\"Ошибка оформления!\", error);\r\n            if (error.error && error.error.cart) {\r\n              this.setCartId(error.error.cart.cartId);\r\n              this.cart.next(error.error.cart);\r\n              this.cartID = error.error.cart.cartId;\r\n            }\r\n            /*if (error.message) {\r\n              this.eventer.emitMessageEvent(\r\n                new EventMessage(error.message.type, error.message.title, error.message.body)\r\n              );\r\n            } else {\r\n              this.eventer.emitMessageEvent(\r\n                new EventMessage('error', 'Ошибка', 'Не удалось оформить заказ')\r\n              );\r\n            }*/\r\n          }\r\n        )\r\n      );\r\n  }\r\n\r\n  checkStreetV2(data): Observable<any> {\r\n    return this.net.post('/check', data)\r\n      .pipe(\r\n        tap(\r\n          result => {\r\n            this.setCartId(result.cart.cartId);\r\n            this.cart.next(result.cart);\r\n            this.cartID = result.cart.cartId;\r\n          },\r\n          () => {}\r\n        )\r\n      );\r\n  }\r\n\r\n  checkStreet(data): void {\r\n\r\n    this.net.post('/check', data).subscribe(\r\n      res => {\r\n        this.setCartId(res.cart.cartId);\r\n        this.cart.next(res.cart);\r\n        this.cartID = res.cart.cartId;\r\n      }, error => {\r\n        if (error.error) {\r\n          if (error.error.cart) {\r\n            this.setCartId(error.error.cart.cartId);\r\n            this.cart.next(error.error.cart);\r\n            this.cartID = error.error.cart.cartId;\r\n          }\r\n          /*this.eventer.emitMessageEvent(\r\n           new EventMessage(error.error.message.type, error.error.message.title, error.error.message.body)\r\n           );*/\r\n        }\r\n      });\r\n\r\n  }\r\n\r\n  setCartId(cartID) {\r\n    localStorage.setItem('cartID', cartID);\r\n    this.cartID = cartID;\r\n  }\r\n\r\n  removeCartId() {\r\n    localStorage.removeItem('cartID');\r\n    this.cartID = null;\r\n  }\r\n\r\n  userCart(): Observable<any> {\r\n    return this.cart;\r\n  }\r\n\r\n  setModifires(modifires, messages?: EventMessage[]): void {\r\n    this.modifires.next(modifires);\r\n    if (messages) {\r\n      this.modifiresMessage.next(messages);\r\n    };\r\n  }\r\n\r\n  getModifires(): Observable<any> {\r\n    return this.modifires.pipe();\r\n  }\r\n\r\n  productInCart(product: DishListItem) {\r\n    return this.cart.pipe(\r\n      filter(cart => 'cartId' in cart),\r\n      map(cart => {\r\n        return !!(cart && cart?.dishes?.find(dishInCart => dishInCart.dish.id === product.id))\r\n      })\r\n    );\r\n  }\r\n\r\n  getPickupPoints(cartId:string) {\r\n    return this.net.get<PickupPoint[]>('/pickupaddreses',true, {\r\n      params:{\r\n        cartId\r\n      }\r\n    });\r\n  }\r\n\r\n  getPaymentMethods(cartId:string) {\r\n    return this.net.get<PaymentMethod[]>('/paymentmethods',true, {\r\n      params:{\r\n        cartId\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n\r\nexport declare interface PickupPoint {\r\n  id: string;\r\n  title: string;\r\n  address: string;\r\n  order: number;\r\n  enable: boolean;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport declare interface PaymentMethod {\r\n  iikoPaymentMethod: any,\r\n  id: string,\r\n  title: string,\r\n  type: string,\r\n  adapter: string,\r\n  order: number,\r\n  description: string,\r\n  enable: boolean,\r\n  createdAt: string,\r\n  updatedAt: string\r\n}\r\n\r\nexport declare interface DishInCart {\r\n  addedBy: string;\r\n  amount: number;\r\n  cart: string;\r\n  comment: string;\r\n  createdAt: string;\r\n  dish: DishListItem;\r\n  id: number;\r\n  itemTotal: number;\r\n  modifiers: any[];\r\n  parent: any;\r\n  totalWeight: number;\r\n  uniqueItems: number;\r\n  updatedAt: string;\r\n  weight: number;\r\n}\r\n\r\nexport declare interface Cart {\r\n  address: any\r\n  cartId: string\r\n  cartTotal: number\r\n  comment: string\r\n  createdAt: string\r\n  customer: string\r\n  delivery: any\r\n  deliveryDescription: string\r\n  deliveryItem: any\r\n  deliveryStatus: any\r\n  dishes: DishInCart[]\r\n  dishesCount: number\r\n  history: any\r\n  id: string\r\n  message: any\r\n  modifiers: any\r\n  nameOfModel: any\r\n  personsCount: number\r\n  problem: boolean\r\n  rmsId: string\r\n  selfDelivery: boolean\r\n  sendToIiko: boolean\r\n  state: string\r\n  totalWeight: string\r\n  uniqueDishes: string\r\n  updatedAt: string\r\n  user: any\r\n  FreeDeliveryFromMessage: string\r\n  date: null\r\n  deliveryTimeMessage: string\r\n  deliveryCost: number\r\n  discountTotal: number\r\n  isPaymentPromise: boolean\r\n  orderDate: string\r\n  orderDateLimit: string\r\n  orderTotal: number\r\n  paid: boolean\r\n  paymentMethod: string\r\n  paymentMethodTitle: string\r\n  recommends: DishListItem[];\r\n  rmsDelivered: boolean\r\n  rmsDeliveryDate: null\r\n  rmsErrorCode: null\r\n  rmsErrorMessage: null\r\n  rmsOrderData: null\r\n  rmsOrderNumber: null\r\n  rmsStatusCode: null\r\n  selfService: boolean\r\n  shortId: string\r\n  total: number\r\n  untilFreeDeliveryMessage: string\r\n}\r\n\r\nexport declare interface DishListItem {\r\n  additionalInfo: any\r\n  balance: number\r\n  carbohydrateAmount: number\r\n  carbohydrateFullAmount: number\r\n  code: string\r\n  createdAt: string\r\n  description: string\r\n  differentPricesOn: any[]\r\n  doNotPrintInCheque: boolean\r\n  energyAmount: number\r\n  energyFullAmount: number\r\n  fatAmount: number\r\n  fatFullAmount: number\r\n  fiberAmount: number\r\n  fiberFullAmount: number\r\n  groupId: any\r\n  groupModifiers: []\r\n  hash: number\r\n  id: string\r\n  images: DishImageItem[]\r\n  imagesList: DishImageItem[]\r\n  isDeleted: boolean\r\n  isIncludedInMenu: boolean\r\n  measureUnit: string\r\n  modifiers: DishModifier[]\r\n  name: string\r\n  order: number\r\n  parentGroup: string\r\n  price: number\r\n  productCategoryId: string\r\n  prohibitedToSaleOn: any[]\r\n  rmsId: string\r\n  seoDescription: any\r\n  seoKeywords: any\r\n  seoText: any\r\n  seoTitle: any\r\n  slug: string\r\n  tags: any[]\r\n  tagsList: any[]\r\n  type: string\r\n  updatedAt: string\r\n  useBalanceForSell: boolean\r\n  weight: number\r\n}\r\n\r\nexport declare interface DishImageUrls {\r\n  large: string\r\n  origin: string\r\n  small: string\r\n}\r\n\r\nexport declare interface DishImageItem {\r\n  createdAt: string\r\n  group: any\r\n  id: string\r\n  images: DishImageUrls\r\n  updatedAt: string\r\n  uploadDate: string\r\n}\r\n\r\nexport declare interface DishBaseModifier {\r\n  maxAmount: number\r\n  minAmount: number\r\n  modifierId: string\r\n  required: boolean\r\n}\r\n\r\nexport declare interface DishModifier extends DishBaseModifier {\r\n  childModifiers: DishChildModifier[]\r\n  childModifiersHaveMinMaxRestrictions: boolean\r\n  group: DishListItem\r\n}\r\n\r\nexport declare interface DishChildModifier extends DishBaseModifier {\r\n  defaultAmount: number\r\n  hideIfDefaultAmount: boolean\r\n  dish: DishListItem\r\n}\r\n\r\nexport declare interface WorkTimeBase {\r\n  start: string;\r\n  stop: string;\r\n  break: string;\r\n}\r\n\r\nexport declare interface WorkTime extends WorkTimeBase {\r\n  dayOfWeek: string\r\n  selfService: WorkTimeBase\r\n}\r\n\r\nexport declare interface RestrictionsOrder {\r\n  minDeliveryTime: string\r\n  deliveryToTimeEnabled:boolean\r\n  periodPossibleForOrder: number\r\n  timezone: string\r\n  workTime: WorkTime[]\r\n}\r\n\r\n","import { Directive, HostListener, Input, Output, EventEmitter } from '@angular/core';\r\nimport { NgRestoCartService } from '../services/ng-restocart.service';\r\n\r\n\r\n@Directive({\r\n  selector: '[rstAddToCart]'\r\n})\r\nexport class AddDishToCartDirective {\r\n\r\n  cart;\r\n  @Input() modifires: any;\r\n\r\n  constructor(private cartService: NgRestoCartService) {\r\n\r\n    this.cartService\r\n      .userCart()\r\n      .subscribe(res => this.cart = res);\r\n\r\n    this.cartService\r\n      .getModifires()\r\n      .subscribe(res => this.modifires = res);\r\n\r\n  }\r\n\r\n\r\n  @Input() dish: any;\r\n  @Input() amountDish: any;\r\n  @Input() comment: string;\r\n\r\n  @Output() loading = new EventEmitter<boolean>();\r\n  @Output() success = new EventEmitter<boolean>();\r\n  @Output() error = new EventEmitter<any>();\r\n\r\n  @HostListener('click')\r\n  onClick() {\r\n    this.addDishToCart(this.dish.id, this.amountDish)\r\n  }\r\n\r\n  private addDishToCart(dishID, amount) {\r\n\r\n    let data = {\r\n      dishId: dishID,\r\n      amount: amount,\r\n      cartId: undefined,\r\n      modifiers: this.modifires,\r\n      comment: this.comment\r\n    };\r\n\r\n    if (this.cart.cartId) data.cartId = this.cart.cartId;\r\n\r\n    this.loading.emit(true);\r\n\r\n    this.cartService\r\n      .addDishToCart$(data)\r\n      .subscribe(\r\n        () => this.success.emit(true),\r\n        e => this.error.emit(e),\r\n        () => this.loading.emit(false)\r\n      );\r\n  }\r\n\r\n}\r\n","import { Directive, Renderer2, ElementRef } from '@angular/core';\r\nimport { NgRestoCartService } from '../services/ng-restocart.service';\r\n\r\n@Directive({\r\n  selector: '[rstAmountCart]'\r\n})\r\nexport class AmountCartDirective {\r\n\r\n  cart:object;\r\n  amount:string;\r\n\r\n  constructor(\r\n    private cartService:NgRestoCartService,\r\n    private renderer: Renderer2,\r\n    private el: ElementRef\r\n  ) {\r\n\r\n    this.amount = '0';\r\n    this.renderer.setProperty(this.el.nativeElement, 'innerHTML', this.amount);\r\n\r\n    this.cartService\r\n      .userCart()\r\n      .subscribe(res => {\r\n        this.cart = res;\r\n        this.amount = res.dishesCount || 0;\r\n        this.renderer.setProperty(this.el.nativeElement, 'innerHTML', this.amount);\r\n      });\r\n  }\r\n\r\n\r\n}\r\n","import { Directive, Input, Output, HostListener, EventEmitter, SimpleChanges } from '@angular/core';\r\nimport { filter, debounceTime, } from 'rxjs/operators'\r\nimport { NgRestoCartService } from '../services/ng-restocart.service';\r\n\r\n@Directive({\r\n  selector: '[rstCheckout]'\r\n})\r\nexport class CheckoutDirective {\r\n\r\n  @Input() cartTotal: any;\r\n\r\n  @Input() bonuses: any;\r\n\r\n  @Input() name: string;\r\n  @Input() email: string;\r\n  @Input() phone: string;\r\n  @Input() delivery: any;\r\n  @Input() selfService: any;\r\n  @Input() locationId: string;\r\n\r\n  @Input() street: string;\r\n  @Input() streetId: string;\r\n  @Input() home: string;\r\n  @Input() housing: string;\r\n  @Input() apartment: string;\r\n  @Input() entrance: string;\r\n  @Input() doorphone: string;\r\n  @Input() floor: string;\r\n\r\n  @Input() paymentMethod: string;\r\n  @Input() paymentMethodId: string;\r\n  @Input() personsCount: number;\r\n  @Input() comment: string;\r\n\r\n  @Input() date: string;\r\n  @Input() notifyMethodId: string;\r\n\r\n  @Output() success = new EventEmitter<boolean>();\r\n  @Output() error = new EventEmitter<string>();\r\n  @Output() isChecking = new EventEmitter<boolean>();\r\n\r\n\r\n  cart: any;\r\n  lastFormChangeKey: string;\r\n\r\n  constructor(private cartService: NgRestoCartService) {\r\n\r\n    this.cartService\r\n      .userCart()\r\n      .subscribe(cart => this.cart = cart);\r\n\r\n    this.cartService.OrderFormChange\r\n      .pipe(\r\n        filter(() => {\r\n          //if((this.locationId || this.streetId) && this.home && this.phone && this.preparePhone(this.phone).length > 11) {\r\n          if (this.locationId || (this.streetId || this.street) && this.home || this.selfService) {\r\n            return true;\r\n          }\r\n        }),\r\n        /*filter(() => {\r\n          const formChangeKey = JSON.stringify({\r\n            1: this.locationId,\r\n            2: this.streetId,\r\n            3: this.street,\r\n            4: this.home,\r\n            5: this.cartTotal,\r\n            6: this.bonuses,\r\n            7: this.delivery,\r\n            8: this.paymentMethodId\r\n          });\r\n\r\n          if(formChangeKey !== this.lastFormChangeKey) {\r\n            this.lastFormChangeKey = formChangeKey;\r\n            return true;\r\n          }\r\n        }),*/\r\n        debounceTime(1000)\r\n      )\r\n      .subscribe(() => this.checkStreet());\r\n  }\r\n\r\n  @HostListener('click')\r\n  onClick() {\r\n    if (!this.locationId && !((this.streetId || this.street) && this.home) && !this.selfService) {\r\n      this.error.emit('Нужно указать адрес');\r\n      return;\r\n    }\r\n\r\n    let comment = this.comment || \"Не указан\";\r\n\r\n    let data = {\r\n      cartId: this.cart.cartId,\r\n      comment: comment,\r\n      customer: {\r\n        phone: this.preparePhone(this.phone),\r\n        mail: this.email,\r\n        name: this.name\r\n      },\r\n      personsCount: +this.personsCount\r\n    };\r\n\r\n    if (this.paymentMethodId) {\r\n      data[\"paymentMethodId\"] = this.paymentMethodId;\r\n    }\r\n\r\n    if (this.date) {\r\n      data[\"date\"] = this.date;\r\n    }\r\n\r\n    if (this.notifyMethodId) {\r\n      data[\"notifyMethodId\"] = this.notifyMethodId;\r\n    }\r\n\r\n    data[\"selfService\"] = this.selfService;\r\n\r\n\r\n    if (this.bonuses) {\r\n      data['bonuses'] = this.bonuses.map(b => {\r\n        return {\r\n          name: b.name,\r\n          amount: b.amount\r\n        }\r\n      });\r\n    }\r\n\r\n\r\n    if (this.locationId) {\r\n      data[\"locationId\"] = this.locationId;\r\n    } else {\r\n      data[\"address\"] = {\r\n        streetId: this.streetId,\r\n        street: this.street,\r\n        home: this.home,\r\n        housing: this.housing,\r\n        doorphone: this.doorphone || '',\r\n        entrance: this.entrance || '',\r\n        floor: this.floor || '',\r\n        apartment: this.apartment || ''\r\n      }\r\n    }\r\n\r\n    const cartId = this.cart.id;\r\n    this.cartService\r\n      .orderCart(data)\r\n      .subscribe(\r\n        result => {\r\n          if (result.action && result.action.paymentRedirect) {\r\n            window.location.href = result.action.paymentRedirect;\r\n          } else {\r\n            this.success.emit(cartId)\r\n          }\r\n        },\r\n        error => this.error.emit(error)\r\n      );\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    this.cartService.OrderFormChange.next(changes);\r\n  }\r\n\r\n  checkStreet() {\r\n\r\n    //if(this.streetId == '0') return;\r\n\r\n    let comment = this.comment || \"Не указан\";\r\n\r\n    let data = {\r\n      cartId: this.cart.cartId,\r\n      comment: comment,\r\n      customer: {\r\n        phone: this.phone ? this.preparePhone(this.phone) : null,\r\n        mail: this.email,\r\n        name: this.name || null\r\n      },\r\n      personsCount: +this.personsCount\r\n    };\r\n\r\n    data[\"selfService\"] = this.selfService;\r\n\r\n    if (this.paymentMethodId) {\r\n      data[\"paymentMethodId\"] = this.paymentMethodId;\r\n    }\r\n\r\n    if (this.date) {\r\n      data[\"date\"] = this.date;\r\n    }\r\n\r\n    if (this.notifyMethodId) {\r\n      data[\"notifyMethodId\"] = this.notifyMethodId;\r\n    }\r\n\r\n    if (this.locationId) {\r\n      data[\"locationId\"] = this.locationId;\r\n    } else {\r\n      data[\"address\"] = {\r\n        streetId: this.streetId,\r\n        street: this.street,\r\n        home: this.home,\r\n        housing: this.housing,\r\n        doorphone: this.doorphone || '',\r\n        entrance: this.entrance || '',\r\n        floor: this.floor || '',\r\n        apartment: this.apartment || ''\r\n      }\r\n    }\r\n\r\n    this.isChecking.emit(true);\r\n    this.cartService\r\n      .checkStreetV2(data)\r\n      .subscribe(\r\n        //() => this.success.emit(true),\r\n        //error => this.error.emit(error)\r\n        () => this.isChecking.emit(false),\r\n        () => this.isChecking.emit(false)\r\n      );\r\n  }\r\n\r\n\r\n  preparePhone(phone) {\r\n    if (!phone) return '';\r\n    phone = '+' + phone.replace(/[^0-9]/gim, '');\r\n    return phone.replace('+8', '+7');\r\n  }\r\n}\r\n","import { Directive , HostListener, Input} from '@angular/core';\r\nimport { NgRestoCartService } from '../services/ng-restocart.service';\r\n\r\n@Directive({\r\n  selector: '[rstDeleteFromCart]'\r\n})\r\nexport class DeleteFromCartDirective {\r\n\r\n  cart;\r\n\r\n  constructor(private cartService:NgRestoCartService) {\r\n    this.cartService\r\n      .userCart()\r\n      .subscribe(res => this.cart = res);\r\n  }\r\n\r\n\r\n  @Input() dish:any;\r\n  @Input() amountDish:any;\r\n\r\n  @HostListener('click')\r\n  onClick() {\r\n    this.cartService.removeDishFromCart(this.dish.id, this.amountDish)\r\n  }\r\n\r\n}\r\n","import {\r\n  Directive, Renderer2, ElementRef,\r\n  HostListener, Input, Output, OnDestroy,\r\n  EventEmitter\r\n} from '@angular/core';\r\nimport { NgRestoCartService } from '../services/ng-restocart.service';\r\n\r\n@Directive({\r\n  selector: '[rstDishCalc]'\r\n})\r\nexport class DishCalcDirective implements OnDestroy {\r\n\r\n  @Input()  dish:any;\r\n  @Input()  amount:any;\r\n  @Input()  selectedModifiers:any;\r\n  @Output()  validate:EventEmitter<any> = new EventEmitter();\r\n  @Output()  amountDishToAdd:EventEmitter<any> = new EventEmitter();\r\n\r\n  weightTotal;\r\n  amountDish;\r\n  price;\r\n  amountModifires:any = {};\r\n  stateModifiers:any = {};\r\n  testcountCall;\r\n\r\n  constructor(private renderer:Renderer2,\r\n              private el:ElementRef,\r\n              private cartService:NgRestoCartService) {\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.renderer.addClass(this.el.nativeElement, \"dish-calculator\");\r\n\r\n\r\n    this.amountDish = this.amount;\r\n\r\n    this.amountDishToAdd.emit(this.amountDish);\r\n    this.price = this.renderer.createElement(\"div\");\r\n    this.renderer.addClass(this.price, \"dish-price\");\r\n\r\n    setTimeout(() => {\r\n      this.renderDish(this.dish);\r\n      this.render(this.dish.modifiers);\r\n    }, 100);\r\n  }\r\n\r\n  renderDish(dish:any) {\r\n    /*\r\n     <div class=\"main-item\">\r\n     <div class=\"item-name\">\r\n     <div class=\"title\">{{dish.name}}</div>\r\n     </div>\r\n     <div class=\"item-quantity\">\r\n     <!-- increase button-->\r\n     <a class=\"item-quantity__button\" (click)=\"changeAmountdish(-1)\">&#8722;</a>\r\n     <span class=\"item-quantity__counter\" >{{amountDish}}</span>\r\n     <!-- decrease button-->\r\n     <a class=\"item-quantity__button\" (click)=\"changeAmountdish(1)\">&#x2b;</a>\r\n     </div>\r\n     <div class=\"weight-price\">\r\n     {{dish.price*amountDish}}&nbsp;&#x20bd;\r\n     </div>\r\n     </div>\r\n\r\n\r\n     */\r\n    let mainItem = this.renderer.createElement(\"div\");\r\n    this.renderer.addClass(mainItem, \"dish-wraper\");\r\n    this.renderer.appendChild(this.el.nativeElement, mainItem);\r\n\r\n    let itemName = this.renderer.createElement(\"div\");\r\n    this.renderer.addClass(itemName, \"name\");\r\n    this.renderer.appendChild(mainItem, itemName);\r\n\r\n    let title = this.renderer.createElement(\"div\");\r\n    this.renderer.addClass(title, \"title\");\r\n    this.renderer.setProperty(title, \"innerHTML\", this.dish.name);\r\n    this.renderer.appendChild(itemName, title);\r\n\r\n    let weightDishWrapper = this.renderer.createElement(\"div\");\r\n    this.renderer.addClass(itemName, \"weight\");\r\n    this.renderer.addClass(itemName, \"dish\");\r\n    this.renderer.appendChild(mainItem, weightDishWrapper);\r\n\r\n    let weightDishValue = this.renderer.createElement(\"div\");\r\n    this.renderer.addClass(weightDishValue, \"value\");\r\n    this.renderer.setProperty(\r\n      weightDishValue,\r\n      \"innerHTML\",\r\n      (this.dish.weight * 1000).toFixed(0) + \" г.\"\r\n    );\r\n    if (this.dish.weight === 0 || !this.dish.weight) {\r\n      this.renderer.addClass(weightDishValue, \"zero\");\r\n    }\r\n    this.renderer.appendChild(weightDishWrapper, weightDishValue);\r\n\r\n    this.renderer.setProperty(this.price, \"innerHTML\", this.dish.price);\r\n    let priceDishWrapper = this.renderer.createElement(\"div\");\r\n    this.renderer.addClass(priceDishWrapper, \"price\");\r\n    this.renderer.addClass(priceDishWrapper, \"total\");\r\n    this.renderer.appendChild(priceDishWrapper, this.price);\r\n    this.renderer.appendChild(mainItem, priceDishWrapper);\r\n\r\n    let itemQuant = this.renderer.createElement(\"div\");\r\n    this.renderer.addClass(itemQuant, \"quantity\");\r\n    this.renderer.appendChild(mainItem, itemQuant);\r\n\r\n    let addButton = this.renderer.createElement(\"a\");\r\n    this.renderer.addClass(addButton, \"quantity__button\");\r\n    this.renderer.addClass(addButton, \"minus\");\r\n    this.renderer.setProperty(addButton, \"innerHTML\", \"&#8722;\");\r\n    this.renderer.listen(addButton, \"click\", e => {\r\n      this.changeAmountdish(-1);\r\n      this.renderer.setProperty(counter, \"innerHTML\", this.amountDish);\r\n      this.renderer.setProperty(this.price, \"innerHTML\", this.generatePrice(this.dish.price));\r\n      this.innerTotalWeight(weightTotal)\r\n    });\r\n    this.renderer.appendChild(itemQuant, addButton);\r\n\r\n    let counter = this.renderer.createElement(\"span\");\r\n    this.renderer.addClass(counter, \"quantity__counter\");\r\n    this.renderer.setProperty(counter, \"innerHTML\", this.amountDish);\r\n    this.renderer.appendChild(itemQuant, counter);\r\n\r\n    let minusButton = this.renderer.createElement(\"a\");\r\n    this.renderer.addClass(minusButton, \"quantity__button\");\r\n    this.renderer.addClass(addButton, \"plus\");\r\n    this.renderer.setProperty(minusButton, \"innerHTML\", \"&#x2b;\");\r\n    this.renderer.listen(minusButton, \"click\", e => {\r\n      this.changeAmountdish(1);\r\n      this.renderer.setProperty(counter, \"innerHTML\", this.amountDish);\r\n      this.renderer.setProperty(\r\n        this.price,\r\n        \"innerHTML\",\r\n        this.generatePrice(this.dish.price)\r\n      );\r\n      this.innerTotalWeight(weightTotal)\r\n    });\r\n    this.renderer.appendChild(itemQuant, minusButton);\r\n\r\n    let weightTotalWrapper = this.renderer.createElement(\"div\");\r\n    this.renderer.addClass(itemName, \"weight\");\r\n    this.renderer.addClass(itemName, \"total\");\r\n    this.renderer.appendChild(mainItem, weightTotalWrapper);\r\n\r\n    let weightTotal = this.renderer.createElement(\"div\");\r\n    if (this.dish.weight === 0 || !this.dish.weight) {\r\n      this.renderer.addClass(weightTotal, \"zero\");\r\n    }\r\n    this.renderer.addClass(weightTotal, \"value\");\r\n    this.innerTotalWeight(weightTotal) // TODO: total Weight\r\n    this.renderer.appendChild(weightTotalWrapper, weightTotal);\r\n    this.weightTotal = weightTotal;\r\n\r\n\r\n    this.renderer.setProperty(\r\n      this.price,\r\n      \"innerHTML\",\r\n      this.generatePrice(dish.price)\r\n    ); // TODO: правильно считать цену\r\n    let priceTotalWrapper = this.renderer.createElement(\"div\");\r\n    this.renderer.addClass(priceTotalWrapper, \"price\");\r\n    this.renderer.addClass(priceTotalWrapper, \"total\");\r\n    this.renderer.appendChild(priceTotalWrapper, this.price);\r\n    this.renderer.appendChild(mainItem, priceTotalWrapper);\r\n  }\r\n\r\n  generatePrice(priceDish, amount?, modifiresPrice?) {\r\n    let selected = [];\r\n    if (this.selectedModifiers)\r\n      this.selectedModifiers.forEach(element => {\r\n\r\n        this.dish.modifiers.forEach(groups => {\r\n          let mod = groups.childModifiers.filter(x=>x.modifierId === element.id);\r\n          if (mod.length > 0) {\r\n            mod[0].groupId = groups.group.id;\r\n            selected.push(mod[0]);\r\n          }\r\n        });\r\n\r\n      });\r\n    let modSum:number = 0;\r\n    selected.forEach(element => {\r\n\r\n      modSum = modSum + element.dish.price * this.amountModifires[element.groupId][element.modifierId]\r\n    });\r\n    modSum = modSum * this.amountDish;\r\n    return (\r\n      priceDish * this.amountDish + modSum + '<div class=\"currency\">&nbsp;&#x20bd;</div>'\r\n    );\r\n  }\r\n\r\n  generateTotalWeight() {\r\n    let selected = [];\r\n    if (this.selectedModifiers)\r\n      this.selectedModifiers.forEach(element => {\r\n\r\n        this.dish.modifiers.forEach(groups => {\r\n          let mod = groups.childModifiers.filter(x=>x.modifierId === element.id);\r\n          if (mod.length > 0) {\r\n            mod[0].groupId = groups.group.id;\r\n            selected.push(mod[0]);\r\n          }\r\n        });\r\n\r\n      });\r\n    let modSum:number = 0;\r\n    selected.forEach(element => {\r\n\r\n      modSum = modSum + element.dish.weight * this.amountModifires[element.groupId][element.modifierId] * 1000\r\n    });\r\n    modSum = parseFloat((modSum * this.amountDish).toFixed(2));\r\n    console.log(modSum, this.dish.weight * 1000 * this.amountDish)\r\n    console.log(this.dish.weight, this.amountDish)\r\n    let weight = (this.dish.weight * 1000 * this.amountDish) + modSum;\r\n\r\n    return (weight).toFixed(0) + \" г. <div class='separator'></div>\";\r\n  }\r\n\r\n  innerTotalWeight(totalWeigthDiv) {\r\n\r\n    this.renderer.setProperty(totalWeigthDiv, \"innerHTML\", this.generateTotalWeight());\r\n  }\r\n\r\n  changeAmountdish(value) {\r\n    this.amountDish = this.amountDish + value;\r\n    if (this.amountDish <= 0) {\r\n      this.amountDish = 1;\r\n\r\n    }\r\n    if (this.amountDish >= 199) {\r\n      this.amountDish = 199;\r\n\r\n    }\r\n    this.amountDishToAdd.emit(this.amountDish)\r\n  }\r\n\r\n  render(modifires:any) {\r\n    this.setModifires();\r\n\r\n    if (modifires.length > 0) {\r\n      let h = this.renderer.createElement(\"h5\");\r\n      this.renderer.setProperty(\r\n        h,\r\n        \"innerHTML\",\r\n        \"К этому блюду можно добавить:\"\r\n      );\r\n      // this.renderer.appendChild(this.el.nativeElement, h);\r\n    }\r\n\r\n\r\n\r\n    modifires.forEach(elementGroup => {\r\n      this.stateModifiers[elementGroup.modifierId] = {};\r\n      this.amountModifires[elementGroup.modifierId] = {};\r\n\r\n      if (elementGroup.dish) {\r\n        let groupDiv = this.groupDiv(\"Одночные модификаторы не поддерживаются\");\r\n        this.renderer.appendChild(this.el.nativeElement, groupDiv);\r\n        console.log(\"elementGroup\",elementGroup);\r\n        //TODO: add single modificator logic\r\n      } else if (elementGroup.childModifiers) {\r\n        let groupDiv = this.groupDiv(\r\n          elementGroup.group ? elementGroup.group.name : \"Ошибка\"\r\n        );\r\n        this.renderer.appendChild(this.el.nativeElement, groupDiv);\r\n        let modArr = elementGroup.childModifiers;\r\n        modArr.forEach(element => {\r\n          let modifireDiv = this.modifireDiv(element, elementGroup.modifierId);\r\n          this.renderer.appendChild(groupDiv, modifireDiv);\r\n          if (element.defaultAmount < 1) {\r\n            this.stateModifiers[elementGroup.modifierId][element.modifierId] = false;\r\n          } else {\r\n            this.stateModifiers[elementGroup.modifierId][element.modifierId] = true;\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    if (modifires.length > 0) {\r\n      let h = this.renderer.createElement(\"div\");\r\n\r\n      this.renderer.setProperty(\r\n        h,\r\n        \"innerHTML\",\r\n        \"<p>* — Количество добавленых опций блюда применяется для каждой порции</p>\"\r\n      );\r\n      this.renderer.appendChild(this.el.nativeElement, h);\r\n    }\r\n\r\n\r\n  }\r\n\r\n  groupDiv(nameGorup) {\r\n    let div = this.renderer.createElement(\"div\");\r\n    this.renderer.addClass(div, \"group-modifires-wraper\");\r\n    this.renderer.appendChild(div, this.renderer.createText(\"\" + nameGorup));\r\n    return div;\r\n  }\r\n\r\n  modifireDiv(element, groupId) {\r\n    let div = this.renderer.createElement(\"div\");\r\n    this.renderer.addClass(div, \"additional-item\");\r\n    this.renderOneModifire(element, div, groupId);\r\n    return div;\r\n  }\r\n\r\n  renderOneModifire(element, modifireDiv, groupId) {\r\n\r\n    console.info('renderOneModifire', element);\r\n    console.info('renderOneModifire selectedModifiers', this.selectedModifiers);\r\n    // Рендер Названия модификатора\r\n    let itemNameDiv = this.renderer.createElement(\"div\");\r\n    this.renderer.addClass(itemNameDiv, \"item-name\");\r\n\r\n    let label = this.renderer.createElement(\"label\");\r\n\r\n    this.renderer.setAttribute(label, \"for\", element.modifierId);\r\n    this.renderer.appendChild(itemNameDiv, label);\r\n    this.renderer.setProperty(label, \"innerHTML\", element.dish.name);\r\n\r\n    this.renderer.appendChild(modifireDiv, itemNameDiv);\r\n\r\n    let weigthModifireWraper = this.renderer.createElement('div');\r\n    this.renderer.addClass(weigthModifireWraper, \"left-weight-modifire-wraper\");\r\n    let weightModifireLeft = this.renderer.createElement('div');\r\n    this.renderer.addClass(weightModifireLeft, 'weight');\r\n    if (element.dish.weight === 0 || element.dish.weight < 0) {\r\n      this.renderer.addClass(weightModifireLeft, 'zero');\r\n    }\r\n    this.renderer.setProperty(weightModifireLeft, 'innerHTML', (element.dish.weight * 1000).toFixed(0) + \" г.\" + '');\r\n\r\n    this.renderer.appendChild(weigthModifireWraper, weightModifireLeft);\r\n    this.renderer.appendChild(modifireDiv, weigthModifireWraper);\r\n\r\n    // Рендер блока изминения количества модификатора\r\n    let itemQuantity = this.renderer.createElement(\"div\");\r\n    /* TODO: нужно проверить:\r\n     да 0,0,[0] - только выключеный чекбокс\r\n     да 0,1 [0]- только чекбокс\r\n     да 0,1 [d===1]- только чекбокс, включеный\r\n\r\n     да 0,n[d=0] - по умолчанию 0 кнопки +-\r\n     да 0,n[d>0<n] - по умолчанию d, кнопки +-\r\n\r\n\r\n\r\n     k,n [k<n,d=0] - k по умолчанию!!! нужно чтобвы стояла цыфра k в амаунт, макс n(больше n не подниамалось) кнопки +- (частный случай когда d=0)\r\n     k,n [k<n,0<d=<n]- d по умолчанию!!! нужно чтобвы стояла цыфра 1 в амаунт, макс n(больше n не подниамалось) кнопки +-\r\n\r\n\r\n\r\n     defaultAmount:0\r\n     hideIfDefaultAmount:false //Признак того, что не нужно отображать список модификаторов, если их количество равно количеству\r\n     maxAmount:0\r\n     minAmount:0\r\n\r\n     */\r\n\r\n    let min = element.minAmount;\r\n    let max = element.maxAmount;\r\n    let def = element.defaultAmount;\r\n\r\n    console.info('min max def', min, max, def);\r\n\r\n    switch (true) {\r\n      case min === 0 && max === 0 && def === 0: // 0,0,[0] - только выключеный чекбокс\r\n        this.renderCheckbox(element, false, itemQuantity, modifireDiv, groupId)\r\n        break;\r\n\r\n      case min === 0 && max === 1 && def === 0: // 0,1 [0]- только чекбокс\r\n        this.renderCheckbox(element, false, itemQuantity, modifireDiv, groupId)\r\n        break;\r\n\r\n      case min === 0 && max === 1 && def === 1: // 0,1 [d!=0]- только чекбокс, включеный\r\n        this.renderCheckbox(element, true, itemQuantity, modifireDiv, groupId)\r\n        break;\r\n      case min === 1 && max === 1 && def === 1: // 0,1 [d!=0]- только чекбокс, включеный\r\n        console.error(\r\n          element.dish.name,\r\n          \"Значение не поддается настройке:\",\r\n          min,\r\n          max,\r\n          def\r\n        );\r\n        break;\r\n\r\n      case min <= max && def >= min && def <= max && max > 1: //d по умолчанию!!! нужно чтобвы стояла цыфра 1 в амаунт, макс n(больше n не подниамалось) кнопки +-\r\n        this.renderInputButton(element, groupId, itemQuantity, modifireDiv)\r\n        break;\r\n\r\n      default:\r\n        console.error(\r\n          element.dish.name,\r\n          \"Ошибка рендера модификатора, для значений:\",\r\n          min,\r\n          max,\r\n          def\r\n        );\r\n        break;\r\n    }\r\n\r\n    if (element.maxAmount > 0 && element.minAmount > 0) {\r\n\r\n    } else {\r\n\r\n    }\r\n    // Рендер блока стоимости и веса модификатора\r\n    // let weightPriceDiv = this.renderer.createElement('div');\r\n    // this.renderer.addClass(weightPriceDiv, 'modal-price');\r\n    // let weight;\r\n    // if(element.dish.weight>0){\r\n    //   weight =  element.dish.weight + \" г \";\r\n    // }\r\n    // let slash = \"/ \";\r\n    // let price;\r\n    // if(element.dish.price>0){\r\n    //   price = element.dish.price + \"&nbsp;&#x20bd;\";\r\n    // }\r\n    // let weightAndPriceHTML = (weight||'')+(weight&&price? slash : '')+( price || '');\r\n    // this.renderer.setProperty(weightPriceDiv, 'innerHTML', weightAndPriceHTML);\r\n    // this.renderer.appendChild(modifireDiv, weightPriceDiv);\r\n\r\n    let rightweigthModifireWraper = this.renderer.createElement('div');\r\n    this.renderer.addClass(rightweigthModifireWraper, \"right-weight-modifire-wraper\");\r\n    let weightModifireRight = this.renderer.createElement('div');\r\n    this.renderer.addClass(weightModifireRight, 'weight');\r\n    if (element.dish.weight === 0 || element.dish.weight < 0) {\r\n      this.renderer.addClass(weightModifireRight, 'zero');\r\n    }\r\n    this.renderer.setProperty(weightModifireRight, 'innerHTML', (element.dish.weight * 1000).toFixed(0) + \" г.\" + '<div class=\"separator\"></div>');\r\n\r\n    this.renderer.appendChild(rightweigthModifireWraper, weightModifireRight);\r\n    this.renderer.appendChild(modifireDiv, rightweigthModifireWraper);\r\n\r\n\r\n    let price = this.renderer.createElement(\"div\");\r\n    this.renderer.addClass(price, \"item-price\");\r\n\r\n    let priceValue;\r\n    if (element.dish.price > 0) {\r\n      priceValue = element.dish.price + \"<div class = 'currency'>&nbsp;&#x20bd;</div>\";\r\n      this.renderer.setProperty(price, \"innerHTML\", priceValue);\r\n      this.renderer.appendChild(modifireDiv, price);\r\n    } else {\r\n      this.renderer.addClass(price, \"zero-price\");\r\n    }\r\n\r\n\r\n    this.setModifires();\r\n    this.innerTotalWeight(this.weightTotal);\r\n    this.renderer.setProperty(this.price, \"innerHTML\", this.generatePrice(this.dish.price));\r\n\r\n  }\r\n\r\n  renderCheckbox(element, isActive, itemQuantity, modifireDiv, groupId) {\r\n\r\n    let input = this.renderer.createElement(\"input\");\r\n    this.renderer.setAttribute(input, \"type\", \"checkbox\");\r\n    this.renderer.setAttribute(input, \"id\", element.modifierId);\r\n    if (isActive) {\r\n      this.renderer.setProperty(input, 'checked', true);\r\n      element.checked = true;\r\n      this.stateModifiers[groupId][element.modifierId] = true;\r\n      this.amountModifires[groupId][element.modifierId] = 1;\r\n\r\n    } else {\r\n      element.checked = false;\r\n      this.stateModifiers[groupId][element.modifierId] = false;\r\n      this.amountModifires[groupId][element.modifierId] = 0;\r\n\r\n    }\r\n    this.renderer.addClass(input, \"modal-checkbox\");\r\n    this.renderer.appendChild(itemQuantity, input);\r\n\r\n    this.renderer.listen(input, \"change\", e => {\r\n      if (this.idRadioBox(groupId)) {\r\n        for (const key in this.stateModifiers[groupId]) {\r\n          if (this.stateModifiers[groupId].hasOwnProperty(key)) {\r\n            this.stateModifiers[groupId][key] = false;\r\n\r\n            // this.renderer.setProperty(input, 'checked',   true);\r\n          }\r\n        }\r\n\r\n        let groupDivBlock = e.target.parentElement.parentElement.parentElement.querySelectorAll(\r\n          \"input\"\r\n        );\r\n\r\n        groupDivBlock.forEach(element => {\r\n          if (element.id != e.target.id) element.checked = false;\r\n        });\r\n      }\r\n      this.stateModifiers[groupId][e.target.id] = e.target.checked;\r\n      if (e.target.checked) {\r\n        this.amountModifires[groupId][e.target.id] = 1;\r\n\r\n      }\r\n\r\n\r\n      this.setModifires();\r\n      this.innerTotalWeight(this.weightTotal);\r\n      this.renderer.setProperty(this.price, \"innerHTML\", this.generatePrice(this.dish.price));\r\n    });\r\n\r\n\r\n    this.renderer.appendChild(modifireDiv, itemQuantity);\r\n\r\n  }\r\n\r\n  renderInputButton(element, groupId, itemQuantity, modifireDiv) {\r\n\r\n    let startAmount;\r\n    if (element.defaultAmount > 0) {\r\n      startAmount = element.defaultAmount;\r\n    } else {\r\n      startAmount = element.minAmount;\r\n\r\n    }\r\n    if (startAmount > 0) {\r\n\r\n      this.stateModifiers[groupId][element.modifierId] = true;\r\n    }\r\n\r\n\r\n    let aMinusDiv = this.renderer.createElement(\"a\");\r\n    this.renderer.addClass(aMinusDiv, \"quantity__button\");\r\n    this.renderer.setProperty(aMinusDiv, \"innerHTML\", \"&#8722;\");\r\n    this.renderer.appendChild(itemQuantity, aMinusDiv);\r\n    this.renderer.listen(aMinusDiv, \"click\", e => {\r\n      let value = +this.amountModifires[groupId][element.modifierId];\r\n\r\n      this.amountModifires[groupId][element.modifierId] = value - 1;\r\n      if (\r\n        this.amountModifires[groupId][element.modifierId] < element.minAmount\r\n      )\r\n        this.amountModifires[groupId][element.modifierId] = element.minAmount;\r\n      this.renderer.setProperty(\r\n        span,\r\n        \"innerHTML\",\r\n        this.amountModifires[groupId][element.modifierId]\r\n      );\r\n\r\n      if (this.amountModifires[groupId][element.modifierId] === 0) {\r\n        this.stateModifiers[groupId][element.modifierId] = false;\r\n      }\r\n      this.setModifires();\r\n      this.innerTotalWeight(this.weightTotal);\r\n      this.renderer.setProperty(this.price, \"innerHTML\", this.generatePrice(this.dish.price));\r\n    });\r\n\r\n    let span = this.renderer.createElement(\"span\");\r\n    this.renderer.addClass(span, \"item-quantity__counter\");\r\n    this.amountModifires[groupId][element.modifierId] = startAmount;\r\n    this.renderer.setProperty(\r\n      span,\r\n      \"innerHTML\",\r\n      this.amountModifires[groupId][element.modifierId]\r\n    );\r\n    this.renderer.appendChild(itemQuantity, span);\r\n\r\n    let aPlusDiv = this.renderer.createElement(\"a\");\r\n    this.renderer.addClass(aPlusDiv, \"quantity__button\");\r\n    this.renderer.setProperty(aPlusDiv, \"innerHTML\", \"&#x2b;\");\r\n    this.renderer.appendChild(itemQuantity, aPlusDiv);\r\n    this.renderer.appendChild(modifireDiv, itemQuantity);\r\n    this.renderer.listen(aPlusDiv, \"click\", e => {\r\n      let value = +this.amountModifires[groupId][element.modifierId];\r\n      this.amountModifires[groupId][element.modifierId] = value + 1;\r\n      if (\r\n        this.amountModifires[groupId][element.modifierId] >\r\n        element.maxAmount &&\r\n        element.maxAmount != 0\r\n      )\r\n        this.amountModifires[groupId][element.modifierId] = element.maxAmount;\r\n      this.renderer.setProperty(\r\n        span,\r\n        \"innerHTML\",\r\n        this.amountModifires[groupId][element.modifierId]\r\n      );\r\n      if (this.amountModifires[groupId][element.modifierId] > 0) {\r\n        this.stateModifiers[groupId][element.modifierId] = true;\r\n      }\r\n      this.setModifires();\r\n      this.innerTotalWeight(this.weightTotal);\r\n      this.renderer.setProperty(this.price, \"innerHTML\", this.generatePrice(this.dish.price));\r\n    });\r\n\r\n  }\r\n\r\n  setModifires() {\r\n    let modifiersToSelect = [];\r\n\r\n    /*if(this.selectedModifiers.length && !(Object.values(this.stateModifiers)).length) {\r\n      modifiersToSelect = this.selectedModifiers;\r\n    }*/\r\n\r\n    let modifires = [];\r\n\r\n    console.info('setModifires modifiersToSelect', modifiersToSelect);\r\n    console.info('setModifires stateModifiers before', this.stateModifiers);\r\n    console.info('setModifires selectedModifiers before', this.selectedModifiers);\r\n\r\n    for (let groupId in this.stateModifiers) {\r\n      for (let modifireId in this.stateModifiers[groupId]) {\r\n        if (this.stateModifiers[groupId][modifireId] || modifiersToSelect.find(item => item.modifierId == modifireId)) {\r\n          modifires.push({\r\n            id: modifireId,\r\n            amount: this.amountModifires[groupId][modifireId],\r\n            groupId: groupId\r\n          });\r\n        }\r\n      }\r\n    }\r\n    this.selectedModifiers = modifires;\r\n\r\n    if (this.dish.modifiers.length > 0) {\r\n      let message = [];\r\n\r\n      this.dish.modifiers.forEach(group => {\r\n        if (group.required) {\r\n          if (this.stateModifiers[group.modifierId]) {\r\n            let selectedModif = [];\r\n            let localModif = this.stateModifiers[group.modifierId]; //.filter(element=>element);\r\n            for (const mod in localModif) {\r\n              if (localModif.hasOwnProperty(mod)) {\r\n                if (localModif[mod]) {\r\n                  selectedModif.push(localModif[mod]);\r\n                }\r\n              }\r\n            }\r\n            if (selectedModif.length < group.minAmount) {\r\n              message.push({\r\n                type: \"warning\",\r\n                title: \"Внимание\",\r\n                body: \" Обязательно выберите модификаторы из категории: \" +\r\n                group.group.name\r\n              });\r\n              this.validate.emit(false);\r\n              this.cartService.setModifires(modifires, message);\r\n            } else {\r\n              this.validate.emit(true);\r\n              this.cartService.setModifires(modifires, []);\r\n            }\r\n          } else {\r\n            message.push({\r\n              type: \"warning\",\r\n              title: \"Внимание\",\r\n              body: \" Обязательно выберите модификаторы из категории: \" +\r\n              group.group.name\r\n            });\r\n            this.validate.emit(false);\r\n            this.cartService.setModifires(modifires, message);\r\n          }\r\n        } else {\r\n          this.validate.emit(true);\r\n          this.cartService.setModifires(modifires);\r\n        }\r\n      });\r\n    } else {\r\n      this.validate.emit(true);\r\n      this.cartService.setModifires(modifires, []);\r\n    }\r\n\r\n    console.info('setModifires stateModifiers after', this.stateModifiers);\r\n    console.info('setModifires selectedModifiers after', this.selectedModifiers);\r\n  }\r\n\r\n  /* проверяет соотвествет ли максимальное количество модификаторовб если 1 то реализует поведение радиокнопки,\r\n   если максимальное количество больше 1 то генерирует делает выбор всех остальных модификаторов не возможным, генерирует предупреждение*/\r\n\r\n  idRadioBox(groupId):boolean {\r\n    let currentGroup = this.dish.modifiers.find(x => x.modifierId === groupId);\r\n    return currentGroup.minAmount === 1 && currentGroup.maxAmount === 1;\r\n  }\r\n\r\n  // Проверяет минимальное количество модификаторовкоторые были выбраны\r\n  checkMinAmountModifires(groupId, modifire) {\r\n  }\r\n\r\n\r\n  ngOnDestroy() {\r\n    //this.dish.modifiers =[];\r\n    this.validate.emit(true);\r\n    this.cartService.setModifires([], []);\r\n  }\r\n\r\n}\r\n","import { Directive, Renderer2, ElementRef, Input } from '@angular/core';\r\nimport { NgRestoCartService } from '../services/ng-restocart.service';\r\n\r\n@Directive({\r\n  selector: '[rstModifires]'\r\n})\r\n\r\nexport class ModifiresDirective {\r\n  @Input() modifires: any;\r\n  amountModifires:any={};\r\n  stateModifires:any={};\r\n\r\n  constructor(\r\n    private renderer: Renderer2,\r\n    private el: ElementRef,\r\n    private cartService:NgRestoCartService\r\n  ) {\r\n\r\n\r\n    setTimeout(() => {\r\n\r\n      this.render(this.modifires)\r\n\r\n    }, 100);\r\n\r\n\r\n  }\r\n\r\n  render(modifires: any) {\r\n\r\n  if(modifires.length>0){  let h = this.renderer.createElement('h5');\r\n    this.renderer.setProperty(h , 'innerHTML', 'К этому блюду можно добавить:');\r\n    this.renderer.appendChild(this.el.nativeElement, h);}\r\n\r\n\r\n    modifires.forEach(elementGroup => {\r\n\r\n      this.stateModifires[elementGroup.modifierId]={};\r\n      this.amountModifires[elementGroup.modifierId]={};\r\n\r\n\r\n      let groupDiv = this.groupDiv(elementGroup.name);\r\n      this.renderer.appendChild(this.el.nativeElement, groupDiv);\r\n\r\n      let modArr;\r\n      if(elementGroup.childModifiers.length>5){\r\n       modArr = elementGroup.childModifiers.slice(0, 5)\r\n      }else{\r\n        modArr = elementGroup.childModifiers;\r\n      }\r\n\r\n\r\n\r\n\r\n      modArr.forEach(element => {\r\n\r\n      let modifireDiv = this.modifireDiv(element,elementGroup.modifierId);\r\n        this.renderer.appendChild(groupDiv,modifireDiv);\r\n\r\n\r\n        this.stateModifires[elementGroup.modifierId][element.modifierId]=false;\r\n\r\n      });\r\n\r\n\r\n    });\r\n\r\n  }\r\n\r\n  groupDiv(nameGorup){\r\n    let div = this.renderer.createElement('div');\r\n    this.renderer.addClass(div, 'group-modifires');\r\n    this.renderer.appendChild(div, this.renderer.createText('Название категории модификаторов: '+nameGorup));\r\n    return div;\r\n  }\r\n\r\n  modifireDiv(element, groupId){\r\n    let div = this.renderer.createElement('div');\r\n    this.renderer.addClass(div, 'additional-item');\r\n    this.renderOneModifire(element, div,groupId);\r\n   return div;\r\n  }\r\n\r\n  renderOneModifire(element, modifireDiv, groupId){\r\n\r\n    // Рендер Названия модификатора\r\n    let itemNameDiv = this.renderer.createElement('div');\r\n    this.renderer.addClass(itemNameDiv, 'item-name');\r\n\r\n    let input = this.renderer.createElement('input');\r\n    this.renderer.setAttribute(input, 'type', 'checkbox');\r\n    this.renderer.setAttribute(input, 'id', element.modifierId);\r\n    this.renderer.appendChild(itemNameDiv, input);\r\n    this.renderer.listen(input,'change',e=>{\r\n      this.stateModifires[groupId][e.target.id]= e.target.checked;\r\n      this.setModifires();\r\n    })\r\n\r\n    let label  = this.renderer.createElement('label');\r\n    this.renderer.setAttribute(label, 'for', element.modifierId);\r\n    this.renderer.appendChild(itemNameDiv, label);\r\n    this.renderer.setProperty(label, 'innerHTML', element.dish.name);\r\n\r\n    this.renderer.appendChild(modifireDiv, itemNameDiv);\r\n// Рендер блока изминения количества модификатора\r\n    let itemQuantity = this.renderer.createElement('div');\r\n\r\n    let aMinusDiv = this.renderer.createElement('a');\r\n    this.renderer.addClass(aMinusDiv, 'item-quantity__button');\r\n    this.renderer.setProperty(aMinusDiv, 'innerHTML', '&#8722;');\r\n    this.renderer.appendChild(itemQuantity, aMinusDiv);\r\n    this.renderer.listen(aMinusDiv,'click',e=>{\r\n      let value =  +this.amountModifires[groupId][element.modifierId];\r\n      this.amountModifires[groupId][element.modifierId] = value-1;\r\n      if(this.amountModifires[groupId][element.modifierId] < element.minAmount)\r\n      this.amountModifires[groupId][element.modifierId]=element.minAmount;\r\n      this.renderer.setProperty(span, 'innerHTML', this.amountModifires[groupId][element.modifierId]);\r\n      this.setModifires();\r\n\r\n    })\r\n\r\n\r\n    let span = this.renderer.createElement('span');\r\n    this.renderer.addClass(span, 'item-quantity__counter');\r\n    this.amountModifires[groupId][element.modifierId] = element.minAmount;\r\n    this.renderer.setProperty(span, 'innerHTML', this.amountModifires[groupId][element.modifierId]);\r\n    this.renderer.appendChild(itemQuantity, span);\r\n\r\n\r\n    let aPlusDiv = this.renderer.createElement('a');\r\n    this.renderer.addClass(aPlusDiv, 'item-quantity__button');\r\n    this.renderer.setProperty(aPlusDiv, 'innerHTML', '&#x2b;');\r\n    this.renderer.appendChild(itemQuantity, aPlusDiv);\r\n    this.renderer.appendChild(modifireDiv, itemQuantity);\r\n    this.renderer.listen(aPlusDiv,'click',e=>{\r\n      let value =  +this.amountModifires[groupId][element.modifierId];\r\n      this.amountModifires[groupId][element.modifierId] = value+1;\r\n      this.renderer.setProperty(span, 'innerHTML', this.amountModifires[groupId][element.modifierId]);\r\n      this.setModifires();\r\n\r\n    })\r\n\r\n// Рендер блока стоимости и веса модификатора\r\n    let weightPriceDiv = this.renderer.createElement('div');\r\n    this.renderer.addClass(weightPriceDiv, 'weight-price');\r\n    let weightAndPriceHTML = element.dish.weight + \" г / \" + element.dish.price + \"&nbsp;&#x20bd;\"\r\n    this.renderer.setProperty(weightPriceDiv, 'innerHTML', weightAndPriceHTML);\r\n    this.renderer.appendChild(modifireDiv, weightPriceDiv);\r\n\r\n    this.setModifires();\r\n\r\n\r\n  }\r\n  setModifires(){\r\n\r\n    let modifires = [];\r\n\r\n    for (let groupId in this.stateModifires){\r\n      for(let modifireId in this.stateModifires[groupId]){\r\n        if(this.stateModifires[groupId][modifireId]){\r\n          modifires.push(\r\n            {\r\n                id: modifireId,\r\n                amount: this.amountModifires[groupId][modifireId],\r\n                groupId: groupId\r\n            }\r\n\r\n          )\r\n        }\r\n\r\n      }\r\n\r\n\r\n    }\r\n    console.log(\"модифікатори після циклу\",modifires)\r\n\r\n    this.cartService.setModifires(modifires);\r\n\r\n  }\r\n\r\n\r\n}\r\n","import { Directive, Input, HostListener } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { NgRestoCartService } from '../services/ng-restocart.service';\r\n\r\n@Directive({\r\n  selector: '[rstOrderCart]'\r\n})\r\nexport class OrderCartUserDirective {\r\n\r\n  @Input() orderCart:any;\r\n  cart:any;\r\n\r\n  @HostListener('click')\r\n  onClick() {\r\n    this.order(this.orderCart.value);\r\n    console.log(this.orderCart.value)\r\n  }\r\n\r\n  private requiredFields:Array<string> = [\"name\", \"phone\", \"street\", \"house\"];\r\n  private checkerFields:BehaviorSubject<boolean>;\r\n\r\n  constructor(private cartService:NgRestoCartService) {\r\n    this.checkerFields = new BehaviorSubject(undefined);\r\n  }\r\n\r\n  ngAfterViewInit():void {\r\n\r\n    setTimeout(() => {\r\n      this.cartService\r\n        .userCart()\r\n        .subscribe(cart=> {\r\n          if (this.cart && this.orderCart.valid && this.cart.cartTotal != cart.cartTotal && cart.cartTotal > 0) {\r\n            this.checkStreet(this.orderCart.value)\r\n          }\r\n          this.cart = cart;\r\n        });\r\n    }, 100);\r\n\r\n    setTimeout(() => {\r\n      this.checkerFields.next(this.checkForFields(this.orderCart._directives, this.requiredFields));\r\n    }, 100);\r\n\r\n    this.checkerFields.subscribe(state => {\r\n      if (state) {\r\n        this.orderCart.controls['street'].valueChanges.subscribe(val => {\r\n          if (typeof val === 'object') {\r\n            setTimeout(() => {\r\n              if (this.orderCart.controls['house'].valid) {\r\n                this.orderCart.value.name = this.orderCart.value.name || \"Неуказано\";\r\n                this.orderCart.value.phone = this.orderCart.value.phone || \"78888888888\";\r\n                this.checkStreet(this.orderCart.value);\r\n              }\r\n            }, 100);\r\n          }\r\n        });\r\n        this.orderCart.controls['house'].valueChanges.subscribe(val => {\r\n          setTimeout(() => {\r\n            if (this.orderCart.controls['street'].valid) {\r\n              this.orderCart.value.name = this.orderCart.value.name || \"Неуказано\";\r\n              this.orderCart.value.phone = this.orderCart.value.phone || \"78888888888\";\r\n              this.checkStreet(this.orderCart.value);\r\n            }\r\n          }, 100);\r\n        });\r\n\r\n      }\r\n    })\r\n\r\n\r\n  }\r\n\r\n\r\n  checkForFields(formDirectives:Array<any>, requiredFields:Array<string>):boolean {\r\n\r\n    let fieldsAreAvailable:object = {};\r\n    let noFields:Array<string> = [];\r\n\r\n\r\n    formDirectives.forEach(element => {\r\n      fieldsAreAvailable[element.name] = true;\r\n    });\r\n\r\n    requiredFields.forEach(element => {\r\n      if (!fieldsAreAvailable.hasOwnProperty(element)) {\r\n        noFields.push(element);\r\n      }\r\n    });\r\n\r\n    if (noFields.length <= 0) {\r\n      return true;\r\n    } else {\r\n      console.error(\"У формы отсутсвуют следующие обязательные для корректной работы модуля поля:\", noFields)\r\n      return false;\r\n    }\r\n  }\r\n\r\n  order(dataToSend) {\r\n    if (this.checkForFields(this.orderCart._directives, this.requiredFields)) {\r\n      let payment;\r\n      let comment = dataToSend.comment || \"Не указан\"\r\n\r\n      if (dataToSend.cash) {\r\n        payment = \"Наличными курьеру\";\r\n      } else if (dataToSend.bankcard) {\r\n        payment = \"Банковской картой курьеру\";\r\n      } else {\r\n        payment = \"Не указан\";\r\n      }\r\n      console.log(dataToSend);\r\n      let data = {\r\n        \"cartId\": this.cart.cartId,\r\n        // TODO: тип оплаты надо вынести в отдельный модуль.\r\n        \"comment\": \"\\n Тип оплаты:\" + payment + \"\\nКоментарий:\" + comment,\r\n        // \"delivery\": {\r\n        //   \"type\": \"string (self or nothing)\"\r\n        // },\r\n        \"address\": {\r\n          // \"city\": \"string\",\r\n          \"streetId\": dataToSend.street.id,\r\n          \"home\": dataToSend.house,\r\n          \"housing\": dataToSend.housing,\r\n          // \"index\": \"string\",\r\n          \"doorphone\": dataToSend.doorphone,\r\n          \"entrance\": dataToSend.entrance,\r\n          \"floor\": dataToSend.floor,\r\n          \"apartment\": dataToSend.apartment\r\n        },\r\n        \"customer\": {\r\n          \"phone\": '+' + dataToSend.phone,\r\n          \"mail\": dataToSend.email,\r\n          \"name\": dataToSend.name\r\n        },\r\n        \"personsCount\": dataToSend.personsCount\r\n      };\r\n      this.cartService.orderCart(data).subscribe();\r\n    } else {\r\n\r\n    }\r\n\r\n\r\n  }\r\n\r\n  checkStreet(dataToSend) {\r\n    console.log(\">>>>\",dataToSend);\r\n    if (this.checkForFields(this.orderCart._directives, this.requiredFields)) {\r\n      let data = {\r\n        \"cartId\": this.cart.cartId,\r\n        \"comment\": dataToSend.comment,\r\n        // \"delivery\": {\r\n        //   \"type\": \"string (self or nothing)\"\r\n        // },\r\n        \"address\": {\r\n          // \"city\": \"string\",\r\n          \"streetId\": dataToSend.street.id,\r\n          \"home\": dataToSend.house,\r\n          \"housing\": dataToSend.housing,\r\n          // \"index\": \"string\",\r\n          \"doorphone\": dataToSend.doorphone,\r\n          \"entrance\": dataToSend.entrance,\r\n          \"floor\": dataToSend.floor,\r\n          \"apartment\": dataToSend.apartment\r\n        },\r\n        \"customer\": {\r\n          \"phone\": '+' + dataToSend.phone,\r\n          \"mail\": dataToSend.email,\r\n          \"name\": dataToSend.name\r\n        },\r\n        \"personsCount\": dataToSend.personsCount\r\n      };\r\n      this.cartService.checkStreet(data);\r\n\r\n    } else {\r\n\r\n    }\r\n  }\r\n\r\n  stringToNumber(str:number | any):number {\r\n    console.log(typeof str);\r\n    if (typeof str === 'string') {\r\n      return +str;\r\n    } else if (typeof str === \"number\") {\r\n      return str;\r\n    } else {\r\n      console.error(\"Параметр home должен быть или string или number\");\r\n    }\r\n  }\r\n\r\n}\r\n","import { Directive, Input, HostListener } from '@angular/core';\r\nimport { NgRestoCartService } from '../services/ng-restocart.service';\r\n\r\n@Directive({\r\n  selector: '[rstSetDishAmount]'\r\n})\r\nexport class SetAmountDirective {\r\n  @Input() action:any;\r\n  @Input() dish:any;\r\n\r\n  @HostListener('click') onClick() {\r\n    this.changeAmount(this.action);\r\n  }\r\n\r\n  private cart;\r\n\r\n  constructor(private cartService:NgRestoCartService) {\r\n    this.cartService\r\n      .userCart()\r\n      .subscribe(res => this.cart = res);\r\n  }\r\n\r\n  changeAmount(action) {\r\n\r\n    switch (action) {\r\n      case '+':\r\n        this.cartService.setDishCountToCart(\r\n          this.dish.id,\r\n          this.dish.amount + 1\r\n        );\r\n        break;\r\n      case '-':\r\n        this.cartService.setDishCountToCart(\r\n          this.dish.id,\r\n          this.dish.amount - 1\r\n        );\r\n        break;\r\n      default:\r\n        console.log(\"Директива SetDishAmount получила ложное значение action\");\r\n        break;\r\n    }\r\n\r\n  }\r\n\r\n}\r\n","import { Directive, Input, Output, EventEmitter, HostListener } from '@angular/core';\r\nimport { NgRestoCartService } from '../services/ng-restocart.service';\r\n\r\n@Directive({\r\n  selector: '[rstSetDishComment]'\r\n})\r\nexport class SetDishCommentDirective {\r\n  @Input() comment:any;\r\n  @Input() dish:any;\r\n\r\n  @Output() success = new EventEmitter<boolean>();\r\n  @Output() error = new EventEmitter<string>();\r\n\r\n  @HostListener('click') onClick() {\r\n    this.setComment();\r\n  }\r\n\r\n  constructor(private cartService:NgRestoCartService) { }\r\n\r\n  setComment(){\r\n    this.cartService.setDishComment(this.dish.id,this.comment).subscribe(\r\n      res=>this.success.emit(true),\r\n      err=>this.error.emit(err)\r\n    )\r\n\r\n\r\n  }\r\n\r\n}\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","<div *ngIf=\"dish\" class=\"ng-cart-dish-calc\" [ngClass]=\"{'ng-cart-dish-calc-two-parts-assembled': isTwoPartsAssembledTemplate}\">\r\n    <div class=\"dish\">\r\n        <div class=\"dish-image-box\">\r\n            <ng-container *ngTemplateOutlet=\"dishImageTemplate; context: { dish: dish }\"></ng-container>\r\n        </div>\r\n        <div class=\"dish-description-box\">\r\n            <div class=\"dish-name\">{{ dish.name }}</div>\r\n            <div class=\"dish-ingredients\">{{ dish.description }}</div>\r\n            <div class=\"dish-price-box\">\r\n                <ng-container *ngIf=\"!modifiers.custom.fixed; else modifierFixedTemplate\">\r\n                    <div class=\"price\" [ngClass]=\"{'zero-price': !dish.price}\">\r\n                        <span>{{ dish.price }}</span> ₽\r\n                    </div>\r\n                </ng-container>\r\n                <ng-template #modifierFixedTemplate>\r\n                    <ng-container *ngIf=\"modifiers.custom.fixed as modifier\">\r\n                        <div class=\"modifier-fixed\">\r\n                            <ng-container *ngFor=\"let childModifier of modifier.childModifiers\">\r\n                                <div class=\"item\"\r\n                                     [ngClass]=\"{selected: !!modifiersValueTree[modifier.modifierId][childModifier.modifierId]}\"\r\n                                     (click)=\"changeModifierAmount(childModifier, 1, 'checkbox')\">\r\n                                    {{ childModifier.dish?.name }}\r\n                                </div>\r\n                            </ng-container>\r\n                        </div>\r\n                        <ng-container *ngFor=\"let childModifier of modifier.childModifiers\">\r\n                            <ng-container *ngIf=\"!!modifiersValueTree[modifier.modifierId][childModifier.modifierId]\">\r\n                                <div class=\"price\" [ngClass]=\"{'zero-price': !childModifier.dish?.price}\">\r\n                                    <span>{{ childModifier.dish?.price }}</span> ₽\r\n                                </div>\r\n                            </ng-container>\r\n                        </ng-container>\r\n                    </ng-container>\r\n                </ng-template>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"modifiers\" *ngIf=\"modifiers.baseList?.length\">\r\n        <ng-container *ngFor=\"let modifier of modifiers.baseList\">\r\n            <div class=\"modifier-group\">\r\n                <ng-container *ngIf=\"modifier.dish\">\r\n                    <div class=\"modifier-header\" *ngIf=\"modifier.group as group\">\r\n                        <div class=\"modifier-name\" *ngIf=\"group.name\">{{ group.name }}</div>\r\n                        <div class=\"modifier-description\" *ngIf=\"group.description\">{{ group.description }}</div>\r\n                    </div>\r\n\r\n                    <div class=\"modifier-box\" [ngClass]=\"{'without-images': !modifier.childImagesIsset}\">\r\n                        <!-- Single modifier -->\r\n                        <ng-container *ngTemplateOutlet=\"modifierTemplate; context: {\r\n                            modifier: modifier,\r\n                            groupId: 'single',\r\n                            amount: modifiersValueTree['single'][modifier.modifierId],\r\n                            groupAmount: modifiersValueTree['single'][modifier.modifierId],\r\n                            groupMinAmount: modifier.minAmount || 0,\r\n                            groupMaxAmount: modifier.maxAmount || 100\r\n                        }\"></ng-container>\r\n                    </div>\r\n                </ng-container>\r\n\r\n                <ng-container *ngIf=\"modifier.childModifiers?.length\">\r\n                    <ng-container *ngIf=\"modifier.minAmount == 2 && modifier.maxAmount == 2; then twoPartsAssembledTemplate else groupTemplate\">\r\n                    </ng-container>\r\n\r\n                    <!-- Base group modifier view -->\r\n                    <ng-template #groupTemplate>\r\n                        <div class=\"modifier-header\" *ngIf=\"modifier.group as group\">\r\n                            <div class=\"modifier-name\" *ngIf=\"group.name\">{{ group.name }}</div>\r\n                            <div class=\"modifier-description\" *ngIf=\"group.description\">{{ group.description }}</div>\r\n                        </div>\r\n                        <div class=\"modifier-children\" [ngClass]=\"{'without-images': !modifier.imagesIsset}\">\r\n                            <ng-container *ngFor=\"let childModifier of modifier.childModifiers\">\r\n                                <!-- Group modifier -->\r\n                                <ng-container *ngTemplateOutlet=\"modifierTemplate; context: {\r\n                            modifier: childModifier,\r\n                            groupId: modifier.modifierId,\r\n                            amount: modifiersValueTree[modifier.modifierId][childModifier.modifierId],\r\n                            groupAmount: modifiers.indexById[modifier.modifierId].totalAmount,\r\n                            groupMinAmount: modifier.minAmount || 0,\r\n                            groupMaxAmount: modifier.maxAmount || 100\r\n                        }\"></ng-container>\r\n\r\n                            </ng-container>\r\n                        </div>\r\n                    </ng-template>\r\n\r\n                    <!-- Two parts assembled group modifier view (like pizza from two halves) -->\r\n                    <ng-template #twoPartsAssembledTemplate>\r\n                        <div class=\"two-parts-assembled\">\r\n                            <div class=\"two-parts-assembled-header\" [ngClass]=\"{empty: !twoPartsAssembledModifiersIdsByGroupId[modifier.modifierId]?.length}\">\r\n                                <ng-container *ngFor=\"let childModifier of modifier.childModifiers\">\r\n                                    <ng-container *ngIf=\"modifiersValueTree[modifier.modifierId][childModifier.modifierId]\">\r\n                                        <ng-container *ngIf=\"childModifier.dish as dish\">\r\n                                            <div class=\"selected-dish\">\r\n                                                <div class=\"title\">{{ dish.name }}</div>\r\n                                                <div class=\"image-box\">\r\n                                                    <ng-container *ngTemplateOutlet=\"dishImageTemplate; context: { dish: dish }\"></ng-container>\r\n                                                </div>\r\n                                            </div>\r\n                                        </ng-container>\r\n                                        <ng-container *ngIf=\"modifiers.indexById[modifier.modifierId].totalAmount == 1\">\r\n                                            <div class=\"selected-dish\">\r\n                                                <div class=\"title\">Выберите половину</div>\r\n                                                <div class=\"image-box\">\r\n                                                    <ng-container *ngTemplateOutlet=\"dishImageTemplate; context: { dish: {} }\"></ng-container>\r\n                                                </div>\r\n                                            </div>\r\n                                        </ng-container>\r\n                                    </ng-container>\r\n                                </ng-container>\r\n                            </div>\r\n\r\n                            <div class=\"two-parts-assembled-body\">\r\n                                <div class=\"two-parts-assembled-body-name\">Выберите любые две половинки</div>\r\n                                <div class=\"two-parts-assembled-body-list\">\r\n                                    <ng-container *ngFor=\"let childModifier of modifier.childModifiers\">\r\n                                        <div class=\"two-parts-assembled-body-list-dish\"\r\n                                             (click)=\"selectTwoPartsAssembledModifier(childModifier)\"\r\n                                             [ngClass]=\"{selected: modifiersValueTree[modifier.modifierId][childModifier.modifierId]}\"\r\n                                             *ngIf=\"childModifier.dish as dish\">\r\n                                            <div class=\"image-box\">\r\n                                                <ng-container *ngTemplateOutlet=\"dishImageTemplate; context: { dish: dish }\"></ng-container>\r\n                                            </div>\r\n                                            <div class=\"dish-name\">\r\n                                                {{ dish.name }}\r\n                                            </div>\r\n                                            <div class=\"dish-price\">\r\n                                                <div [ngClass]=\"{'zero-price': !dish.price}\">\r\n                                                    <span>{{ dish.price }}</span> ₽\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </ng-container>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </ng-template>\r\n\r\n\r\n                </ng-container>\r\n\r\n            </div>\r\n        </ng-container>\r\n    </div>\r\n    <div class=\"result\">\r\n        <span class=\"text\">ИТОГО:</span>\r\n        <span class=\"price\">\r\n            <span>{{ totalPrice}}</span> ₽\r\n        </span>\r\n    </div>\r\n    <div class=\"comment\" *ngIf=\"isTwoPartsAssembledTemplate\">\r\n        <div class=\"title\">Комментарий</div>\r\n        <div class=\"input-box\">\r\n            <input #commentInput type=\"text\" placeholder=\"\" (keyup)=\"comment.emit(commentInput.value)\">\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n<!-- Template block #dishImageTemplate -->\r\n\r\n<ng-template #dishImageTemplate let-dish=\"dish\">\r\n    <ng-container *ngIf=\"dish?.images && dish.images[0]?.images?.small; else imgPlaceholder\">\r\n        <div class=\"dish-image\" [style.backgroundImage]=\"'url(' + imageUrl + dish.images[0].images.small + ')'\"></div>\r\n    </ng-container>\r\n    <ng-template #imgPlaceholder>\r\n        <div class=\"dish-image-placeholder\"></div>\r\n    </ng-template>\r\n</ng-template>\r\n\r\n<!-- Template block #modifierTemplate -->\r\n\r\n<ng-template #modifierTemplate\r\n             let-modifier=\"modifier\"\r\n             let-groupId=\"groupId\"\r\n             let-amount=\"amount\"\r\n             let-groupAmount=\"groupAmount\"\r\n             let-groupMinAmount=\"groupMinAmount\"\r\n             let-groupMaxAmount=\"groupMaxAmount\">\r\n    <ng-container *ngIf=\"modifier.dish as dish\">\r\n        <div class=\"modifier-dish\">\r\n            <div class=\"modifier-dish-image-box\">\r\n                <ng-container *ngTemplateOutlet=\"dishImageTemplate; context: { dish: dish }\"></ng-container>\r\n            </div>\r\n            <div class=\"modifier-dish-description-box\">\r\n                <div class=\"modifier-dish-name\">{{ dish.name }}</div>\r\n                <div class=\"modifier-dish-weight\" *ngIf=\"dish.weight\">{{ dish.weight * 1000 }} гр</div>\r\n            </div>\r\n            <div class=\"modifier-dish-price-box\">\r\n                <div [ngClass]=\"{'zero-price': !dish.price}\">\r\n                    <span>{{ dish.price }}</span> ₽\r\n                </div>\r\n            </div>\r\n            <div class=\"modifier-dish-action-box\">\r\n                <ng-container *ngIf=\"groupMinAmount <= 1 && groupMaxAmount == 1; else counterTemplate\">\r\n                    <ng-container *ngTemplateOutlet=\"modifierCheckboxTemplate; context: {\r\n                        modifier: modifier,\r\n                        groupId: groupId,\r\n                        amount: amount\r\n                    }\"></ng-container>\r\n                </ng-container>\r\n\r\n                <ng-template #counterTemplate>\r\n                    <ng-container *ngTemplateOutlet=\"modifierCounterTemplate; context: {\r\n                        modifier: modifier,\r\n                        groupId: groupId,\r\n                        amount: amount,\r\n                        groupAmount: groupAmount,\r\n                        groupMinAmount: groupMinAmount,\r\n                        groupMaxAmount: groupMaxAmount\r\n                    }\"></ng-container>\r\n                </ng-template>\r\n\r\n            </div>\r\n        </div>\r\n    </ng-container>\r\n</ng-template>\r\n\r\n<!-- Template block #modifierCounterTemplate -->\r\n\r\n<ng-template #modifierCounterTemplate\r\n             let-modifier=\"modifier\"\r\n             let-groupId=\"groupId\"\r\n             let-amount=\"amount\"\r\n             let-groupAmount=\"groupAmount\"\r\n             let-groupMinAmount=\"groupMinAmount\"\r\n             let-groupMaxAmount=\"groupMaxAmount\">\r\n    <ng-container>\r\n        <div class=\"modifier-counter\" [ngClass]=\"{disabled: !amount && groupAmount >= groupMaxAmount}\">\r\n            <div\r\n                    class=\"minus\"\r\n                    [ngClass]=\"{disabled: !amount || groupAmount <= groupMinAmount}\"\r\n                    (click)=\"changeModifierAmount(modifier, amount - 1, 'minus')\"\r\n                    onselectstart=\"return false;\">-</div>\r\n            <input [value]=\"amount\" readonly #input>\r\n            <div\r\n                    class=\"plus\"\r\n                    [ngClass]=\"{disabled: groupAmount >= groupMaxAmount}\"\r\n                    (click)=\"changeModifierAmount(modifier, amount + 1, 'plus')\"\r\n                    onselectstart=\"return false;\">+</div>\r\n        </div>\r\n    </ng-container>\r\n</ng-template>\r\n\r\n<!-- Template block #modifierCheckboxTemplate -->\r\n\r\n<ng-template #modifierCheckboxTemplate\r\n             let-modifier=\"modifier\"\r\n             let-groupId=\"groupId\"\r\n             let-amount=\"amount\">\r\n    <ng-container>\r\n        <div\r\n                class=\"modifier-checkbox\"\r\n                [ngClass]=\"{selected: amount}\"\r\n                (click)=\"changeModifierAmount(modifier, amount ? 0 : 1, 'checkbox')\"></div>\r\n    </ng-container>\r\n</ng-template>\r\n","import { Component, OnInit, OnChanges, OnDestroy, Input, Output, EventEmitter, Inject } from '@angular/core';\r\nimport { NgRestoCartService } from \"../../services/ng-restocart.service\";\r\n\r\nimport {\r\n  EventerService,\r\n  EventMessage\r\n} from '@webresto/ng-core/dist';\r\n\r\n@Component({\r\n  selector: 'rst-dish-calc',\r\n  templateUrl: './dish-calc.component.html',\r\n  styleUrls: ['./dish-calc.component.scss']\r\n})\r\nexport class DishCalcComponent implements OnInit, OnChanges, OnDestroy {\r\n\r\n  @Input() dish:any;\r\n  @Input() amount:any;\r\n  @Input() selectedModifiers:any;\r\n  @Output() validate:EventEmitter<any> = new EventEmitter();\r\n  @Output() amountDishToAdd:EventEmitter<any> = new EventEmitter();\r\n  @Output() comment:EventEmitter<string> = new EventEmitter();\r\n\r\n  modifiers = {\r\n    indexById: {},\r\n    custom: {\r\n      fixed: null\r\n    },\r\n    baseList: [],\r\n  };\r\n\r\n  isTwoPartsAssembledTemplate: boolean;\r\n\r\n  totalPrice: number;\r\n  modifiersValueTree: any = {};\r\n  twoPartsAssembledModifiersIdsByGroupId: any = {};\r\n  imageUrl: string;\r\n\r\n  constructor(\r\n    private cartService: NgRestoCartService,\r\n    private eventer:EventerService,\r\n    @Inject('ImageUrl') imageUrl:string\r\n  ) {\r\n    this.imageUrl = imageUrl;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.checkValid();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.validate.emit(true);\r\n    this.cartService.setModifires([], []);\r\n  }\r\n\r\n  ngOnChanges() {\r\n    this.modifiers = {\r\n      indexById: {},\r\n      custom: {\r\n        fixed: null\r\n      },\r\n      baseList: [],\r\n    };\r\n\r\n    this.modifiersValueTree = {};\r\n    if(this.dish && this.dish.modifiers) {\r\n      for(let modifier of this.dish.modifiers) {\r\n        let modifierType = null;\r\n        // Indexing\r\n        this.modifiers.indexById[modifier.modifierId] = modifier;\r\n        // Check Custom modifiers (like Pizza Size)\r\n        if(!this.modifiers.custom.fixed\r\n          && !this.modifiers.baseList.length\r\n          && modifier.childModifiers\r\n          && modifier.childModifiers.length == 2\r\n          && modifier.maxAmount == modifier.maxAmount\r\n          && modifier.maxAmount == 1) {\r\n          // This is Pizza Size modifier\r\n          modifierType = 'custom';\r\n          this.modifiers.custom.fixed = modifier;\r\n          console.info('Custom Fixed modifier:', modifier);\r\n        } else if(modifier.group\r\n          && modifier.childModifiers\r\n          && modifier.childModifiers.length\r\n          && modifier.childModifiers.find(m => m.dish)) {\r\n          // This is Base modifier\r\n          modifierType = 'group';\r\n          this.modifiers.baseList.push(modifier);\r\n\r\n          if(modifier.minAmount == 2 && modifier.maxAmount == 2) {\r\n            this.isTwoPartsAssembledTemplate = true;\r\n          }\r\n          console.info('Group modifier:', modifier);\r\n        } else if(modifier.dish) {\r\n          modifierType = 'single';\r\n          this.modifiers.baseList.push(modifier);\r\n          console.info('Single modifier:', modifier);\r\n        } else {\r\n          // This is broken modifier\r\n          modifierType = 'broken';\r\n          console.warn('Broken modifier:', modifier);\r\n        }\r\n\r\n\r\n        // Init default values\r\n        switch (modifierType) {\r\n          case 'group':\r\n          case 'custom':\r\n            this.modifiersValueTree[modifier.modifierId] = {};\r\n            for(let childModifier of modifier.childModifiers) {\r\n              // Indexing\r\n              this.modifiers.indexById[childModifier.modifierId] = childModifier;\r\n              // Init default value\r\n              this.modifiersValueTree[modifier.modifierId][childModifier.modifierId] = childModifier.defaultAmount;\r\n            }\r\n            // Calculate total amount in group\r\n            this.calculateTotalAmountInGroup(modifier.modifierId);\r\n            break;\r\n          case 'single':\r\n            if(!this.modifiersValueTree['single']){\r\n              this.modifiersValueTree['single'] = {}\r\n            }\r\n            // Indexing\r\n            this.modifiers.indexById[modifier.modifierId] = modifier;\r\n            // Init default value\r\n            this.modifiersValueTree['single'][modifier.modifierId] = modifier.defaultAmount;\r\n        }\r\n\r\n        // Find images and set flags (imagesIsset, childImagesIsset)\r\n        this.checkImagesInModifier(modifier.modifierId);\r\n\r\n      }\r\n      this.calculateTotalPrice();\r\n    }\r\n    console.log(`this.modifiers.indexById`, this.modifiers.indexById);\r\n  }\r\n\r\n  calculateTotalAmountInGroup(groupId) {\r\n    if(groupId == 'single') return;\r\n    this.modifiers.indexById[groupId].totalAmount = Object\r\n      .values(this.modifiersValueTree[groupId])\r\n      .reduce((a: any, b: any) => a + b);\r\n    return this.modifiers.indexById[groupId].totalAmount;\r\n  }\r\n\r\n  checkImagesInModifier(modifierId) {\r\n    const m: any = this.modifiers.indexById[modifierId];\r\n    this.modifiers.indexById[modifierId].imagesIsset = m.dish && m.dish.images && m.dish.images.length ? true : false;\r\n    this.modifiers.indexById[modifierId].childImagesIsset = !!this.modifiers.indexById[modifierId]\r\n      .childModifiers\r\n      .find((m: any) => m && m.dish && m.dish.images && m.dish.images.length ? true : false);\r\n  }\r\n\r\n  calculateTotalPrice() {\r\n    let totalPrice = this.dish.price || 0;\r\n    for(let groupId in this.modifiersValueTree) {\r\n      for(let modifierId in this.modifiersValueTree[groupId]) {\r\n        const amount = this.modifiersValueTree[groupId][modifierId];\r\n        if(amount) {\r\n          const modifier = this.modifiers.indexById[modifierId];\r\n          if(modifier && modifier.dish && modifier.dish.price) {\r\n            totalPrice += modifier.dish.price * amount;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    this.totalPrice = totalPrice;\r\n    this.setModifiers();\r\n  }\r\n\r\n  getModifiersIds(modifier) {\r\n    return {\r\n      groupId: (modifier.dish && modifier.dish.groupId) ? modifier.dish.groupId : undefined,\r\n      modifierId: modifier.modifierId\r\n    }\r\n  }\r\n\r\n  selectTwoPartsAssembledModifier(modifier: any) {\r\n    const { groupId = 'single', modifierId } = this.getModifiersIds(modifier);\r\n    const { minAmount, maxAmount } = modifier;\r\n    const { minAmount: groupMinAmount = 0,\r\n      maxAmount: groupMaxAmount = 0 } = this.modifiers.indexById[groupId] || {};\r\n    const previousAmount: number = this.modifiersValueTree[groupId][modifierId];\r\n    const amount: number = previousAmount ? 0 : 1;\r\n\r\n    // Init tmp value storage if not exists\r\n    if(!this.twoPartsAssembledModifiersIdsByGroupId[groupId]) {\r\n      this.twoPartsAssembledModifiersIdsByGroupId[groupId] = [];\r\n    }\r\n\r\n    // Total amount in group\r\n    const groupAmount: number = this.modifiers.indexById[groupId].totalAmount - previousAmount + amount;\r\n    if(groupAmount > groupMaxAmount) {\r\n      if(this.twoPartsAssembledModifiersIdsByGroupId[groupId].length) {\r\n        for(let mId in this.modifiersValueTree[groupId]) {\r\n          this.modifiersValueTree[groupId][mId] = 0;\r\n        }\r\n        this.twoPartsAssembledModifiersIdsByGroupId[groupId] = this.twoPartsAssembledModifiersIdsByGroupId[groupId].slice(1,2);\r\n        this.modifiersValueTree[groupId][this.twoPartsAssembledModifiersIdsByGroupId[groupId][0]] = 1;\r\n      }else {\r\n        console.warn(`Limit: max ${groupMaxAmount}. Current ${groupAmount}`);\r\n        this.eventer.emitMessageEvent(\r\n          new EventMessage(\r\n            'warning',\r\n            'Ограничение',\r\n            `Максимальное количество опций для группы\r\n            модификаторов \"${this.modifiers.indexById[groupId].group.name}\" - не более ${groupMaxAmount}`\r\n          )\r\n        );\r\n        return;\r\n      }\r\n    }else if(groupAmount === 0) {\r\n      this.twoPartsAssembledModifiersIdsByGroupId[groupId] = [];\r\n    }\r\n\r\n    if(amount && !this.twoPartsAssembledModifiersIdsByGroupId[groupId].find(v => v == modifierId)) {\r\n      this.twoPartsAssembledModifiersIdsByGroupId[groupId].push(modifierId);\r\n    }\r\n    this.modifiersValueTree[groupId][modifierId] = amount;\r\n    this.calculateTotalAmountInGroup(groupId);\r\n    this.calculateTotalPrice();\r\n  }\r\n\r\n  changeModifierAmount(modifier: any, amount: number, operation: string) {\r\n    if(amount < 0) return;\r\n    const { groupId = 'single', modifierId } = this.getModifiersIds(modifier);\r\n    const { minAmount, maxAmount } = modifier;\r\n    const { minAmount: groupMinAmount = 0,\r\n            maxAmount: groupMaxAmount = 0 } = this.modifiers.indexById[groupId] || {};\r\n    const previousAmount: number = this.modifiersValueTree[groupId][modifierId];\r\n\r\n    // For checkbox\r\n    if(operation == 'checkbox' && groupId !== 'single') {\r\n      // If it work like radio button\r\n      if(groupMinAmount <= 1 && groupMaxAmount == 1) {\r\n        if(amount < groupMinAmount) {\r\n          return;\r\n        }\r\n        // Set zero amount for all options\r\n        for(let itemModifierId in this.modifiersValueTree[groupId]) {\r\n          this.modifiersValueTree[groupId][itemModifierId] = 0\r\n        }\r\n        this.calculateTotalAmountInGroup(groupId);\r\n      }\r\n      // Not action needed after\r\n      if(amount == 0) {\r\n        this.calculateTotalPrice();\r\n        return;\r\n      }\r\n    }\r\n\r\n    // Check Group amount limits\r\n    if(groupMinAmount || groupMaxAmount) {\r\n      // Total amount in group\r\n      const groupAmount: number = this.modifiers.indexById[groupId].totalAmount - previousAmount + amount;\r\n\r\n      if(groupAmount < groupMinAmount) {\r\n        console.warn(`Limit: min ${groupMinAmount}. Current ${groupAmount}`);\r\n        this.eventer.emitMessageEvent(\r\n          new EventMessage(\r\n            'warning',\r\n            'Ограничение',\r\n            `Максимальное количество опций для группы\r\n            модификаторов \"${this.modifiers.indexById[groupId].group.name}\" - не менее ${groupMinAmount}`\r\n          )\r\n        );\r\n        return;\r\n      }\r\n      if(groupAmount > groupMaxAmount) {\r\n        console.warn(`Limit: max ${groupMaxAmount}. Current ${groupAmount}`);\r\n        this.eventer.emitMessageEvent(\r\n          new EventMessage(\r\n            'warning',\r\n            'Ограничение',\r\n            `Максимальное количество опций для группы\r\n            модификаторов \"${this.modifiers.indexById[groupId].group.name}\" - не более ${groupMaxAmount}`\r\n          )\r\n        );\r\n        return;\r\n      }\r\n    }\r\n\r\n    // CHeck Modifier amount limits\r\n    if(minAmount || maxAmount) {\r\n      if(amount < minAmount) {\r\n        switch (operation) {\r\n          case 'plus': amount = minAmount; break;\r\n          case 'minus': amount = 0; break;\r\n        }\r\n      }\r\n      if(amount > maxAmount) {\r\n        amount = maxAmount;\r\n      }\r\n    }\r\n\r\n    this.modifiersValueTree[groupId][modifierId] = amount;\r\n    this.calculateTotalAmountInGroup(groupId);\r\n    this.calculateTotalPrice();\r\n  }\r\n\r\n  setModifiers() {\r\n    const modifiersToSet = [];\r\n\r\n    for(let groupId in this.modifiersValueTree) {\r\n      for(let modifierId in this.modifiersValueTree[groupId]) {\r\n        const amount = this.modifiersValueTree[groupId][modifierId];\r\n        if(amount) {\r\n\r\n          modifiersToSet.push({\r\n            id: modifierId,\r\n            amount: amount,\r\n            groupId: groupId !== 'single' ? groupId : undefined\r\n          });\r\n\r\n        }\r\n      }\r\n    }\r\n\r\n    if(modifiersToSet.length) {\r\n      this.checkValid();\r\n      this.cartService.setModifires(modifiersToSet, []);\r\n    }\r\n  }\r\n\r\n  checkValid() {\r\n\r\n    let isValid = true;\r\n\r\n    for(let groupId in this.modifiersValueTree) {\r\n\r\n      const groupModifier = this.modifiers.indexById[groupId];\r\n      if(groupModifier.required) {\r\n        const totalAmountInGroup = this.calculateTotalAmountInGroup(groupId);\r\n        if(totalAmountInGroup < groupModifier.minAmount) {\r\n          isValid = false;\r\n          console.warn(`Modifier ${groupId} min amount: ${groupModifier.minAmount}`);\r\n        }\r\n        if(totalAmountInGroup > groupModifier.maxAmount) {\r\n          isValid = false;\r\n          console.warn(`Modifier ${groupId} max amount: ${groupModifier.maxAmount}`);\r\n        }\r\n      }\r\n\r\n      //for(let modifierId in this.modifiersValueTree[groupId]) {\r\n      //\r\n      //}\r\n    }\r\n\r\n    this.validate.emit(isValid);\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AddDishToCartDirective } from './directives/add-dish-to-cart.directive';\r\nimport { AmountCartDirective } from './directives/amount-cart.directive';\r\nimport { DeleteFromCartDirective } from './directives/delete-from-cart.directive';\r\nimport { OrderCartUserDirective } from './directives/order-cart-user.directive';\r\n//import { ModifiresDirective } from './directives/modifires.directive';\r\nimport { SetAmountDirective } from './directives/set-amount.directive';\r\nimport { DishCalcDirective } from './directives/dish-calc.directive';\r\nimport { CheckoutDirective } from \"./directives/checkout.directive\";\r\nimport { SetDishCommentDirective } from './directives/set-dish-comment.directive';\r\nimport { DishCalcComponent } from './components/dish-calc/dish-calc.component';\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  providers: [],\r\n  declarations: [\r\n    AddDishToCartDirective,\r\n    AmountCartDirective,\r\n    DeleteFromCartDirective,\r\n    OrderCartUserDirective,\r\n    //ModifiresDirective,\r\n    DishCalcDirective,\r\n    SetDishCommentDirective,\r\n    SetAmountDirective,\r\n    CheckoutDirective,\r\n    DishCalcComponent\r\n  ],\r\n  exports: [\r\n    AddDishToCartDirective,\r\n    AmountCartDirective,\r\n    DeleteFromCartDirective,\r\n    OrderCartUserDirective,\r\n    //ModifiresDirective,\r\n    DishCalcDirective,\r\n    SetDishCommentDirective,\r\n    SetAmountDirective,\r\n    CheckoutDirective,\r\n    DishCalcComponent\r\n  ]\r\n})\r\nexport class NgRestoCartModule { }\r\n","/*\r\n * Public API Surface of ng-cart\r\n */\r\n\r\nexport * from './lib/services/ng-restocart.service';\r\nexport * from './lib/directives/add-dish-to-cart.directive';\r\nexport * from './lib/directives/amount-cart.directive';\r\nexport * from './lib/directives/checkout.directive';\r\nexport * from './lib/directives/delete-from-cart.directive';\r\nexport * from './lib/directives/dish-calc.directive';\r\nexport * from './lib/directives/modifires.directive';\r\nexport * from './lib/directives/order-cart-user.directive';\r\nexport * from './lib/directives/set-amount.directive';\r\nexport * from './lib/directives/set-dish-comment.directive';\r\nexport * from './lib/components/dish-calc/dish-calc.component';\r\nexport * from './lib/ng-cart.module';","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["BehaviorSubject","switchMap","from","throwError","catchError","tap","filter","map","Injectable","EventEmitter","Directive","Input","Output","HostListener","debounceTime","i0.ɵɵelementContainer","i0.ɵɵelementContainerStart","i0.ɵɵelementStart","i0.ɵɵtext","i0.ɵɵelementEnd","i0.ɵɵelementContainerEnd","i0.ɵɵadvance","i0.ɵɵproperty","i0.ɵɵtextInterpolate","i0.ɵɵlistener","i0.ɵɵtextInterpolate1","i0.ɵɵtemplate","i0.ɵɵelement","i0.ɵɵstyleProp","EventMessage","Component","Inject","CommonModule","NgModule"],"mappings":"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"}